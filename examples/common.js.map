{"version":3,"sources":["webpack:///webpack/bootstrap 412470bef1f3d4f86de3","webpack:///./index.js","webpack:///./src/index.js","webpack:///./src/base.js","webpack:///./src/utils.js","webpack:///./~/object-assign/index.js","webpack:///./~/modulex-querystring/lib/querystring.js","webpack:///./~/modulex-url/lib/url.js","webpack:///./~/modulex-path/lib/path.js","webpack:///./src/chain-promise.js","webpack:///./src/xhr-transport.js","webpack:///./src/xhr-transport-base.js","webpack:///./src/constants.js","webpack:///./src/send-mixin.js","webpack:///./src/sub-domain-transport.js","webpack:///./src/script-transport.js","webpack:///./src/jsonp.js","webpack:///./src/form.js","webpack:///./src/form-serializer.js","webpack:///./src/iframe-transport.js","webpack:///./src/methods.js"],"names":["module","exports","require","io","serialize","FormSerializer","getFormData","url","querystring","rlocalProtocol","rspace","mirror","s","rnoContent","locationHref","location","undefined","href","locationUrl","parse","isLocal","test","protocol","transports","defaultConfig","method","contentType","async","traditional","processData","accepts","xml","html","text","json","converters","JSON","utils","parseXML","headers","contents","ajaxSetup","c","context","mix","clone","deep","data","uri","type","resolve","query","crossDomain","host","toUpperCase","hasContent","stringify","trim","split","indexOf","cache","_ksTS","Date","now","guid","requestInterceptors","responseInterceptors","useRequest","config","error","interceptor","push","useResponse","success","ejectRequest","index","splice","ejectResponse","IO","map","_","userConfig","responseData","timeoutTimer","responseText","responseXML","responseHeadersString","responseHeaders","requestHeaders","readyState","state","statusText","status","transport","TransportConstructor","callPreprocessors","fire","setRequestHeader","i","timeout","hasOwnProperty","beforeSend","call","setTimeout","abort","send","e","console","stack","_ioReady","message","prototype","getPromise","Promise","Error","promise","reject","__resolve","__reject","then","fail","always","fn","preprocessors","events","interceptors","request","use","eject","response","_responseInterceptors","addPreprocessor","callback","callbacks","info","concat","l","length","on","detach","list","target","currentTarget","setting","setupTransport","name","getTransport","getConfig","CLONE_MARKER","MIX_CIRCULAR_DETECTION","EMPTY","RE_NOT_WHITESPACE","isValidParamValue","val","t","isObject","obj","Object","toString","_mix","p","r","ov","wl","structured","src","Array","isArray","mixInternal","keys","len","cloneInternal","input","f","memory","destination","k","stamp","Constructor","constructor","Boolean","String","Number","RegExp","valueOf","filter","htmlEntities","reverseEntities","escapeHtmlReg","unEscapeHtmlReg","possibleEscapeHtmlReg","escapeRegExp","getEscapeReg","getUnEscapeReg","str","slice","addEvent","el","addEventListener","attachEvent","removeEvent","removeEventListener","detachEvent","parseXml","documentElement","window","DOMParser","parseFromString","ActiveXObject","loadXML","getElementsByTagName","whitelist","overwrite","originalWl","ret","each","v_","v","pre","makeArray","o","lengthType","oType","nodeName","startsWith","prefix","lastIndexOf","endsWith","suffix","ind","escapeHtml","replace","m","unEscapeHtml","n","fromCharCode","extend","Child","Parent","members","Noop","globalEval","execScript","d","eval","noop","isEmptyObject","inArray","needle","arr","formatQuery","sep","eq","serializeArray","buf","key","originalKey","encodeURIComponent","pop","join","forEach","numberify","parseFloat","ua","navigator","userAgent","match","ie","ieMode","document","documentMode","runFn","args","next","stopAtError","done","ok","chainPromise","fns","arg","isSubDomain","hostname","domain","XhrTransport","useSubDomainProxy","XhrTransportBase","supportCORS","SubDomainTransport","nativeXhr","proto","sendInternal","XDomainRequest_","XDomainRequest","lastModifiedCached","eTagCached","__lastModifiedCached","__eTagCached","createStandardXHR","refWin","XMLHttpRequest","createActiveXHR","isInstanceOfXDomainRequest","xhr","getIfModifiedKey","ifModified","ifModifiedKey","urlUtils","sendMixin","callBeforeSendInternal","files","username","mimeType","_getUrlForSend","xhrFields","cacheValue","open","password","withCredentials","overrideMimeType","xRequestHeader","sendContent","originalSentContent","FormData","vs","append","_callback","onload","onerror","onreadystatechange","event","lastModified","eTag","getAllResponseHeaders","getResponseHeader","bodyIndex","lastBodyIndex","OK_CODE","NOT_FOUND_CODE","NO_CONTENT_CODE2","NO_CONTENT_CODE","ERROR_CODE","MULTIPLE_CHOICES","NOT_MODIFIED","beforeSendInternal","iframeMap","subDomainProxyUrl","onLoad","iframeDesc","ready","iframe","_onLoad","bind","iframeUri","proxy","contentWindow","createElement","style","position","left","top","insertBefore","pathname","script","jsOnLoadCallbacks","getScript","charset","node","end","callbackIndex","firstChild","ScriptTransport","self","scriptCharset","jsonpCallback","jsonpCallbackName","cJsonpCallbackName","previous","ee","formParam","form","useIframeUpload","isUpload","inputs","toLowerCase","selected","getAttribute","rselectTextarea","rCRLF","rinput","normalizeCRLF","elementsToArray","elements","forms","subs","apply","disabled","checked","value","BREATH_INTERVAL","iframeConverter","isCustomDomain","getEmptyIframeSrc","win","createIframe","id","bottom","width","height","visibility","addDataToForm","appendChild","removeFieldsFromData","fields","parentNode","removeChild","setAttrs","attrs","a","setAttribute","eventType","iframeDoc","body","innerHTML","XMLDocument","IframeTransport","action","encoding","enctype","go","submit","HEADER_REG","handleResponseData","converts","type0","shift","unshift","dataTypeIndex","rawData","prevType","converter","exec","getNativeXhr","isSuccess","clearTimeout","handler","argumentError","_e","_error","_responseData","payload","eventObject","h","complete","search","substring"],"mappings":"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A;AACA,mBAAkB,oBAAoB;AACtC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;ACzFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAkB;AAClB;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAY,eAAe;AAC3B,aAAY,oBAAoB;AAChC,aAAY,gBAAgB;AAC5B,aAAY,mBAAmB;AAC/B,aAAY,kBAAkB;AAC9B;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,QAAQ;AACvB,iBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA,8CAA6C,SAAS;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,gDAA+C;AAC/C,kDAAiD;AACjD,mDAAkD;AAClD,uCAAsC;AACtC,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,iBAAgB,OAAO;AACvB;AACA;AACA;AACA;AACA;AACA,qBAAoB;AACpB;AACA;AACA;;AAEA,eAAc,SAAS;AACvB;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA,G;;;;;;AChJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA,MAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,QAAQ;AACvB,iBAAgB;AAChB;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,wBAAuB,kBAAkB;AACzC;;AAEA;AACA;AACA;AACA,cAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,I;;;;;;ACvTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAoD,IAAI;;AAExD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,WAAU,QAAQ;AAClB;AACA;AACA;AACA;AACA,cAAa;AACb;AACA,cAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAc,MAAM;AACpB;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,iBAAgB,OAAO;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,kCAAiC,qBAAqB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA,iBAAgB;AAChB;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA,iBAAgB;AAChB;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA,iBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,4BAA2B,0BAA0B;AACrD;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,iBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA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","file":"common.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tvar parentJsonpFunction = window[\"webpackJsonp\"];\n \twindow[\"webpackJsonp\"] = function webpackJsonpCallback(chunkIds, moreModules) {\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, callbacks = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId])\n \t\t\t\tcallbacks.push.apply(callbacks, installedChunks[chunkId]);\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(chunkIds, moreModules);\n \t\twhile(callbacks.length)\n \t\t\tcallbacks.shift().call(null, __webpack_require__);\n \t\tif(moreModules[0]) {\n \t\t\tinstalledModules[0] = 0;\n \t\t\treturn __webpack_require__(0);\n \t\t}\n \t};\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// \"0\" means \"already loaded\"\n \t// Array means \"loading\", array contains callbacks\n \tvar installedChunks = {\n \t\t3:0\n \t};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId, callback) {\n \t\t// \"0\" is the signal for \"already loaded\"\n \t\tif(installedChunks[chunkId] === 0)\n \t\t\treturn callback.call(null, __webpack_require__);\n\n \t\t// an array means \"currently loading\".\n \t\tif(installedChunks[chunkId] !== undefined) {\n \t\t\tinstalledChunks[chunkId].push(callback);\n \t\t} else {\n \t\t\t// start chunk loading\n \t\t\tinstalledChunks[chunkId] = [callback];\n \t\t\tvar head = document.getElementsByTagName('head')[0];\n \t\t\tvar script = document.createElement('script');\n \t\t\tscript.type = 'text/javascript';\n \t\t\tscript.charset = 'utf-8';\n \t\t\tscript.async = true;\n\n \t\t\tscript.src = __webpack_require__.p + \"\" + chunkId + \".\" + ({\"0\":\"export\",\"1\":\"proxy\",\"2\":\"simple\"}[chunkId]||chunkId) + \".js\";\n \t\t\thead.appendChild(script);\n \t\t}\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 412470bef1f3d4f86de3","module.exports = require('./src/');\n\n\n\n// WEBPACK FOOTER //\n// ./index.js","import io from './base';\nimport './xhr-transport';\nimport './script-transport';\nimport './jsonp';\nimport './form';\nimport './iframe-transport';\nimport './methods';\nimport FormSerializer from './form-serializer';\nimport url from 'modulex-url';\nimport querystring from 'modulex-querystring';\n\nio.serialize = FormSerializer.serialize;\nio.getFormData = FormSerializer.getFormData;\nio.url = url;\nio.querystring = querystring;\n\nexport default io;\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","/* eslint no-console:0 */\n\nimport utils from './utils';\nimport querystring from 'modulex-querystring';\nimport assign from 'object-assign';\nimport url from 'modulex-url';\nimport chainPromise from './chain-promise';\n\nconst rlocalProtocol = /^(?:about|app|app\\-storage|.+\\-extension|file|widget):$/;\nconst rspace = /\\s+/;\nfunction mirror(s) {\n  return s;\n}\nconst rnoContent = /^(?:GET|HEAD)$/;\nconst locationHref = typeof location !== undefined ? location.href : null;\nconst locationUrl = locationHref && url.parse(locationHref);\nconst isLocal = rlocalProtocol.test(locationUrl.protocol);\nconst transports = {};\nconst defaultConfig = {\n  method: 'GET',\n  contentType: 'application/x-www-form-urlencoded; charset=UTF-8',\n  async: true,\n  traditional: false,\n  processData: true,\n  accepts: {\n    xml: 'application/xml, text/xml',\n    html: 'text/html',\n    text: 'text/plain',\n    json: 'application/json, text/javascript',\n    '*': '*/*',\n  },\n  converters: {\n    text: {\n      json: JSON.parse,\n      html: mirror,\n      text: mirror,\n      xml: utils.parseXML,\n    },\n  },\n  headers: {\n    'X-Requested-With': 'XMLHttpRequest',\n  },\n  contents: {\n    xml: /xml/,\n    html: /html/,\n    json: /json/,\n  },\n};\n\ndefaultConfig.converters.html = defaultConfig.converters.text;\n\nfunction ajaxSetup(c) {\n  // deep mix,exclude context!\n  const context = c.context;\n  delete c.context;\n  c = utils.mix(utils.clone(defaultConfig), c, {\n    deep: true,\n  });\n  c.context = context || c;\n\n  const data = c.data;\n  let uri;\n  let method = c.method;\n  let type = c.type;\n\n  uri = c.uri = url.parse(url.resolve(locationHref, c.url), true);\n\n  // see method _getUrlForSend\n  uri.query = {};\n\n  if (!('crossDomain' in c)) {\n    c.crossDomain = !(uri.protocol === locationUrl.protocol && uri.host === locationUrl.host);\n  }\n\n  method = c.method = method.toUpperCase();\n  c.hasContent = !rnoContent.test(method);\n\n  if (c.processData && typeof data !== 'string') {\n    // normalize to string\n    c.data = querystring.stringify(data, undefined, undefined, !c.traditional);\n  }\n\n  // \n  type = c.type = (type || '*').trim().split(rspace);\n\n  if (!('cache' in c) && ['script', 'jsonp'].indexOf(type[0]) !== -1) {\n    c.cache = false;\n  }\n\n  if (!c.hasContent) {\n    if (c.data) {\n      assign(uri.query, querystring.parse(c.data));\n    }\n    if (c.cache === false) {\n      uri.query._ksTS = `${Date.now()}_${utils.guid()}`;\n    }\n  }\n  return c;\n}\n\nconst requestInterceptors = [];\nconst responseInterceptors = [];\n\nfunction useRequest(config, error) {\n  const interceptor = {\n    config,\n    error,\n  };\n  requestInterceptors.push(interceptor);\n  return interceptor;\n}\n\nfunction useResponse(success, error) {\n  const interceptor = {\n    success,\n    error,\n  };\n  responseInterceptors.push(interceptor);\n  return interceptor;\n}\n\nfunction ejectRequest(interceptor) {\n  const index = requestInterceptors.indexOf(interceptor);\n  if (index !== -1) {\n    requestInterceptors.splice(index, 1);\n  }\n}\n\nfunction ejectResponse(interceptor) {\n  const index = responseInterceptors.indexOf(interceptor);\n  if (index !== -1) {\n    responseInterceptors.splice(index, 1);\n  }\n}\n\n/**\n *\n * @cfg {String} url\n * request destination\n *\n * @cfg {String} method request method.\n * eg: 'get','post'\n * Default to: 'get'\n *\n * @cfg {String} contentType\n * Default to: 'application/x-www-form-urlencoded; charset=UTF-8'\n * Data will always be transmitted to the server using UTF-8 charset\n *\n * @cfg {Object} accepts\n * Default to: depends on type.\n * The content type sent in request header that tells the server\n * what kind of response it will accept in return.\n * It is recommended to do so once in the {@link IO#method-ajaxSetup}\n *\n * @cfg {Boolean} async\n * Default to: true\n * whether request is sent asynchronously\n *\n * @cfg {Boolean} cache\n * Default to: true ,false for type 'script' and 'jsonp'\n * if set false,will append _ksTs=Date.now() to url automatically\n *\n * @cfg {Object} contents\n * a name-regexp map to determine request data's type\n * It is recommended to do so once in the {@link IO#method-ajaxSetup}\n *\n * @cfg {Object} context\n * specify the context of this request 's callback (success,error,complete)\n *\n * @cfg {Object} converters\n * Default to: {text:{json:Json.parse,html:mirror,text:mirror,xml:parseXML}}\n * specified how to transform one type to another type\n * It is recommended to do so once in the {@link IO#method-ajaxSetup}\n *\n * @cfg {Boolean} crossDomain\n * Default to: false for same-domain request,true for cross-domain request\n * if server-side jsonp redirect to another domain, you should set this to true.\n * if you want use script for jsonp for same domain request, you should set this to true.\n *\n * @cfg {Object} data\n * Data sent to server.if processData is true,data will be serialized to String type.\n * if value is an Array, serialization will be based on traditional.\n *\n * @cfg {String} type\n * return data as a specified type\n * Default to: Based on server contentType header\n * 'xml' : a XML document\n * 'text'/'html': raw server data\n * 'script': evaluate the return data as script\n * 'json': parse the return data as json and return the result as final data\n * 'jsonp': load json data via jsonp\n *\n * @cfg {Object} headers\n * additional name-value header to send along with this request.\n *\n * @cfg {String} jsonp\n * Default to: 'callback'\n * Override the callback function name in a jsonp request. eg:\n * set 'callback2' , then jsonp url will append  'callback2=?'.\n *\n * @cfg {String} jsonpCallback\n * Specify the callback function name for a jsonp request.\n * set this value will replace the auto generated function name.\n * eg:\n * set 'customCall' , then jsonp url will append 'callback=customCall'\n *\n * @cfg {String} mimeType\n * override xhr 's mime type\n *\n * @cfg {String} ifModified\n * whether enter if modified mode.\n * Defaults to false.\n *\n * @cfg {Boolean} processData\n * Default to: true\n * whether data will be serialized as String\n *\n * @cfg {String} scriptCharset\n * only for type 'jsonp' and 'script' and 'get' type.\n * force the script to certain charset.\n *\n * @cfg {Function} beforeSend\n * beforeSend(io,config)\n * callback function called before the request is sent.this function has 2 arguments\n *\n * 1. current io object\n *\n * 2. current io config\n *\n * note: can be used for add progress event listener for native xhr's upload attribute\n * see <a href='http://www.w3.org/TR/XMLHttpRequest/#event-xhr-progress'>XMLHttpRequest2</a>\n *\n * @cfg {Function} success\n * success(data,textStatus,xhr)\n * callback function called if the request succeeds.this function has 3 arguments\n *\n * 1. data returned from this request with type specified by type\n *\n * 2. status of this request with type String\n *\n * 3. io object of this request , for details {@link IO}\n *\n * @cfg {Function} error\n * success(data,textStatus,xhr)\n * callback function called if the request occurs error.this function has 3 arguments\n *\n * 1. null value\n *\n * 2. status of this request with type String,such as 'timeout','Not Found','parsererror:...'\n *\n * 3. io object of this request , for details {@link IO}\n *\n * @cfg {Function} complete\n * success(data,textStatus,xhr)\n * callback function called if the request finished(success or error).this function has 3 arguments\n *\n * 1. null value if error occurs or data returned from server\n *\n * 2. status of this request with type String,such as success:'ok',\n * error:'timeout','Not Found','parsererror:...'\n *\n * 3. io object of this request , for details {@link IO}\n *\n * @cfg {Number} timeout\n * Set a timeout(in seconds) for this request.if will call error when timeout\n *\n * @cfg {Boolean} traditional\n * whether not to add [] to data's name when data's value is array in serialization\n *\n * @cfg {Object} xhrFields\n * name-value to set to native xhr.set as xhrFields:{withCredentials:true}\n * note: withCredentials defaults to true.\n *\n * @cfg {String} username\n * a username tobe used in response to HTTP access authentication request\n *\n * @cfg {String} password\n * a password tobe used in response to HTTP access authentication request\n *\n * @cfg {String} subDomainProxy\n * 'force': use proxy for sub domain request even browser supports cors\n * 'auto': only use proxy for sub domain request browser does not support cors.\n * default to '': do not use.\n *\n * @cfg {String} subDomainProxyUrl\n * proxy page, eg:\n * a.t.cn/a.htm send request to b.t.cn/b.htm:\n *\n * 1. a.htm set <code> document.domain='t.cn' </code>\n *\n * 2. b.t.cn/proxy.htm 's content is <code> &lt;script>document.domain='t.cn'&lt;/script> </code>\n *\n * 3. in a.htm , call <code> IO({xdr:{subDomain:{proxy:'/proxy.htm'}}}) </code>\n *\n */\nfunction IO(config) {\n  if (!(this instanceof IO)) {\n    return new IO(config);\n  }\n\n  chainPromise(requestInterceptors.map(interceptor => interceptor.config), config, (_, c) => {\n    this.userConfig = c;\n\n    c = ajaxSetup(c);\n\n    assign(this, {\n      //  json\n      responseData: null,\n      /**\n       * config of current IO instance.\n       * @member IO\n       * @property config\n       * @type Object\n       */\n      config: c || {},\n      timeoutTimer: null,\n\n      /**\n       * String typed data returned from server\n       * @type String\n       */\n      responseText: null,\n      /**\n       * xml typed data returned from server\n       * @type String\n       */\n      responseXML: null,\n      responseHeadersString: '',\n      responseHeaders: null,\n      requestHeaders: {},\n      /**\n       * readyState of current request\n       * 0: initialized\n       * 1: send\n       * 4: completed\n       * @type Number\n       */\n      readyState: 0,\n      state: 0,\n      /**\n       * HTTP statusText of current request\n       * @type String\n       */\n      statusText: null,\n      /**\n       * HTTP Status Code of current request\n       * eg:\n       * 200: ok\n       * 404: Not Found\n       * 500: Server Error\n       * @type String\n       */\n      status: 0,\n      transport: null,\n    });\n\n    let TransportConstructor;\n    let transport;\n\n    /**\n     * fired before generating request object\n     * @event start\n     * @member IO\n     * @static\n     * @param {IO} e.io current io\n     */\n    IO.callPreprocessors('start', {\n      io: this,\n    });\n    IO.fire('start', {\n      io: this,\n    });\n\n    TransportConstructor = transports[c.type[0]] || transports['*'];\n    transport = new TransportConstructor(this);\n\n    this.transport = transport;\n\n    if (c.contentType) {\n      this.setRequestHeader('Content-Type', c.contentType);\n    }\n\n    const type = c.type[0];\n    let i;\n    const timeout = c.timeout;\n    const context = c.context;\n    const headers = c.headers;\n    const accepts = c.accepts;\n\n    // Set the Accepts header for the server, depending on the type\n    this.setRequestHeader(\n      'Accept',\n      type && accepts[type] ?\n      accepts[type] + (type === '*' ? '' : ', */*; q=0.01') :\n        accepts['*']\n    );\n\n    // Check for headers option\n    for (i in headers) {\n      if (headers.hasOwnProperty(i)) {\n        this.setRequestHeader(i, headers[i]);\n      }\n    }\n\n    // allow setup native listener\n    // such as xhr.upload.addEventListener('progress', function (ev) {})\n    if (c.beforeSend && (c.beforeSend.call(context, this, c) === false)) {\n      return this;\n    }\n\n    this.readyState = 1;\n\n    /**\n     * fired before sending request\n     * @event send\n     * @member IO\n     * @static\n     * @param {IO} e.io current io\n     */\n    IO.callPreprocessors('send', {\n      io: this,\n    });\n    IO.fire('send', {\n      io: this,\n    });\n\n    // Timeout\n    if (c.async && timeout > 0) {\n      this.timeoutTimer = setTimeout(() => {\n        this.abort('timeout');\n      }, timeout * 1000);\n    }\n\n    try {\n      // flag as sending\n      this.state = 1;\n      transport.send();\n    } catch (error) {\n      chainPromise(requestInterceptors.map(interceptor => interceptor.error), error, (e) => {\n        console.error(e.stack || e);\n        setTimeout(() => {\n          throw e;\n        }, 0);\n        // Propagate exception as error if not done\n        if (this.state < 2) {\n          this._ioReady(-1, e.message || 'send error');\n          // Simply rethrow otherwise\n        }\n      }, false);\n    }\n\n    return this;\n  });\n}\n\nassign(IO.prototype, {\n  getPromise() {\n    if (typeof Promise === 'undefined') {\n      throw new Error('xhr-plus needs Promise polyfill in global namespace!');\n    }\n    if (!this.promise) {\n      this.promise = new Promise((resolve, reject) => {\n        this.__resolve = resolve;\n        this.__reject = reject;\n      });\n    }\n    return this.promise;\n  },\n  then(success, fail) {\n    return this.getPromise().then(success, fail);\n  },\n  always(fn) {\n    return this.getPromise().then(fn, fn);\n  },\n  fail(fn) {\n    return this.getPromise().then(undefined, fn);\n  },\n  'catch'(fn) {\n    return this.fail(fn);\n  },\n});\n\nconst preprocessors = {};\nconst events = {};\n\nassign(IO, {\n  interceptors: {\n    request: {\n      use: useRequest,\n      eject: ejectRequest,\n    },\n    response: {\n      use: useResponse,\n      eject: ejectResponse,\n    },\n  },\n\n  _responseInterceptors: responseInterceptors,\n\n  preprocessors,\n\n  events,\n\n  addPreprocessor(type, callback) {\n    const callbacks = preprocessors[type] = preprocessors[type] || [];\n    callbacks.push(callback);\n    return IO;\n  },\n\n  callPreprocessors(type, info) {\n    const callbacks = (preprocessors[type] || []).concat();\n    for (let i = 0, l = callbacks.length; i < l; i++) {\n      callbacks[i].call(IO, info);\n    }\n  },\n\n  on(type, callback) {\n    const callbacks = events[type] = events[type] || [];\n    callbacks.push(callback);\n    return IO;\n  },\n\n  detach(type, callback) {\n    if (callback) {\n      const list = events[type];\n      if (list) {\n        const index = list.indexOf(callback);\n        if (index !== -1) {\n          list.splice(index, 1);\n        }\n      }\n    } else {\n      events[type] = [];\n    }\n  },\n\n  fire(type, info) {\n    const callbacks = (events[type] || []).concat();\n    info = info || {};\n    info.type = type;\n    info.target = info.currentTarget = IO;\n    for (let i = 0, l = callbacks.length; i < l; i++) {\n      callbacks[i].call(IO, info);\n    }\n  },\n\n  /**\n   * whether current application is a local application\n   * (protocol is file://,widget://,about://)\n   * @type {Boolean}\n   * @member IO\n   * @static\n   */\n  isLocal,\n  /**\n   * name-value object that set default config value for io class\n   * @param {Object} setting\n   * @member IO\n   * @static\n   */\n  ajaxSetup(setting) {\n    utils.mix(defaultConfig, setting, {\n      deep: true,\n    });\n  },\n  /**\n   * @private\n   * @member IO\n   * @static\n   */\n  setupTransport(name, fn) {\n    transports[name] = fn;\n  },\n  /**\n   * @private\n   * @member IO\n   * @static\n   */\n  getTransport(name) {\n    return transports[name];\n  },\n  /**\n   * get default config value for io request\n   * @return {Object}\n   * @member IO\n   * @static\n   */\n  getConfig() {\n    return defaultConfig;\n  },\n});\n\nexport default IO;\n\n/*\n // !TODO\n //  event/custom \n //  custom.on(IO,type) \n\n 2014-06-09 yiminghe@gmail.com\n - refactor by url module\n\n 2012-08-16\n - transform IO to class, remove XhrObject class.\n - support ifModified\n - http://bugs.jquery.com/ticket/8394\n - http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html\n - https://github.com/kissyteam/kissy/issues/203\n\n 2012-07-18 yiminghe@gmail.com\n - refactor by Uri\n\n 2012-2-07 yiminghe@gmail.com\n -  Promise \n\n 2011 yiminghe@gmail.com\n -  jquery\n */\n\n\n\n// WEBPACK FOOTER //\n// ./src/base.js","/* eslint no-nested-ternary:0, no-use-before-define:0 */\nimport assign from 'object-assign';\nconst CLONE_MARKER = '__~ks_cloned';\nconst MIX_CIRCULAR_DETECTION = '__MIX_CIRCULAR';\nlet guid = 0;\nconst EMPTY = '';\nconst RE_NOT_WHITESPACE = /\\S/;\n\nfunction isValidParamValue(val) {\n  const t = typeof val;\n  // If the type of val is null, undefined, number, string, boolean, return TRUE.\n  return val === null || val === undefined || (t !== 'object' && t !== 'function');\n}\n\nfunction isObject(obj) {\n  return Object.prototype.toString.call(obj) === '[object Object]';\n}\n\nfunction _mix(p, r, s, ov, wl, deep, cache, structured) {\n  // \n  // \n  // mix\n  if (ov || !(p in r) || deep) {\n    const target = r[p];\n    let src = s[p];\n    // prevent never-end loop\n    if (target === src) {\n      if (target === undefined) {\n        r[p] = target;\n      }\n      return;\n    }\n    if (wl) {\n      src = wl.call(s, p, src);\n    }\n    //  mix\n    if (deep && src && (Array.isArray(src) || isObject(src))) {\n      if (structured && src[MIX_CIRCULAR_DETECTION]) {\n        r[p] = src[MIX_CIRCULAR_DETECTION];\n      } else {\n        //  mix\n        //  / mix\n        const clone = target && (Array.isArray(target) || isObject(target)) ?\n          target :\n          (Array.isArray(src) ? [] : {});\n        r[p] = clone;\n        mixInternal(clone, src, ov, wl, true, cache, structured);\n      }\n    } else if (src !== undefined && (ov || !(p in r))) {\n      r[p] = src;\n    }\n  }\n}\n\nfunction mixInternal(r, s, ov, wl, deep, cache, structured) {\n  if (!s || !r) {\n    return r;\n  }\n  let i;\n  let p;\n  let keys;\n  let len;\n\n  // \n  s[MIX_CIRCULAR_DETECTION] = r;\n\n  // \n  cache.push(s);\n\n  // mix all properties\n  keys = Object.keys(s);\n  len = keys.length;\n  for (i = 0; i < len; i++) {\n    p = keys[i];\n    if (p !== MIX_CIRCULAR_DETECTION) {\n      // no hasOwnProperty judge!\n      _mix(p, r, s, ov, wl, deep, cache, structured);\n    }\n  }\n\n  return r;\n}\n\nfunction cloneInternal(input, f, memory, structured) {\n  let destination = input;\n  const isArray = Array.isArray(input);\n  let k;\n  let stamp;\n\n  if (!input) {\n    return destination;\n  }\n\n  // If input is the source object of a pair of objects in memory,\n  // then return the destination object in that pair of objects .\n  // and abort these steps.\n  if (structured && input[CLONE_MARKER]) {\n    // \n    return memory[input[CLONE_MARKER]].destination;\n  } else if (isObject(input)) {\n    // \n    const Constructor = input.constructor;\n    if ([Boolean, String, Number, Date, RegExp].indexOf(Constructor) !== -1) {\n      destination = new Constructor(input.valueOf());\n    } else if (isArray) {\n      // ImageData , File, Blob , FileList .. etc\n      destination = f ? input.filter(f) : input.concat();\n    } else {\n      destination = {};\n    }\n    if (structured) {\n      // Add a mapping from input (the source object)\n      // to output (the destination object) to memory.\n      // \n      // stamp can not be\n      input[CLONE_MARKER] = (stamp = utils.guid('c'));\n      // \n      memory[stamp] = { destination, input };\n    }\n  }\n  // If input is an Array object or an Object object,\n  // then, for each enumerable property in input,\n  // add a new property to output having the same name,\n  // and having a value created from invoking the internal structured cloning algorithm recursively\n  // with the value of the property as the 'input' argument and memory as the 'memory' argument.\n  // The order of the properties in the input and output objects must be the same.\n\n  // clone it\n  if (isArray) {\n    for (let i = 0; i < destination.length; i++) {\n      destination[i] = cloneInternal(destination[i], f, memory, structured);\n    }\n  } else if (isObject(input)) {\n    for (k in input) {\n      if (k !== CLONE_MARKER &&\n        (!f || (f.call(input, input[k], k, input) !== false))) {\n        destination[k] = cloneInternal(input[k], f, memory, structured);\n      }\n    }\n  }\n\n  return destination;\n}\n\n// http://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet\n// http://wonko.com/post/html-escaping\nconst htmlEntities = {\n  '&amp;': '&',\n  '&gt;': '>',\n  '&lt;': '<',\n  '&#x60;': '`',\n  '&#x2F;': '/',\n  '&quot;': '\"',\n  '&#x27;': `'`,\n};\nconst reverseEntities = {};\nlet escapeHtmlReg;\nlet unEscapeHtmlReg;\nconst possibleEscapeHtmlReg = /[&<>\"'`]/;\n// - # $ ^ * ( ) + [ ] { } | \\ , . ?\nconst escapeRegExp = /[\\-#$\\^*()+\\[\\]{}|\\\\,.?\\s]/g;\n\nfor (const k in htmlEntities) {\n  if (htmlEntities.hasOwnProperty(k)) {\n    reverseEntities[htmlEntities[k]] = k;\n  }\n}\n\nescapeHtmlReg = getEscapeReg();\nunEscapeHtmlReg = getUnEscapeReg();\n\nfunction getEscapeReg() {\n  let str = EMPTY;\n  for (const e in htmlEntities) {\n    if (htmlEntities.hasOwnProperty(e)) {\n      str += `${htmlEntities[e]}|`;\n    }\n  }\n  str = str.slice(0, -1);\n  escapeHtmlReg = new RegExp(str, 'g');\n  return escapeHtmlReg;\n}\n\nfunction getUnEscapeReg() {\n  let str = EMPTY;\n  for (const e in reverseEntities) {\n    if (reverseEntities.hasOwnProperty(e)) {\n      str += `${reverseEntities[e]}|`;\n    }\n  }\n  str += '&#(\\\\d{1,5});';\n  unEscapeHtmlReg = new RegExp(str, 'g');\n  return unEscapeHtmlReg;\n}\n\nconst utils = {\n  addEvent(el, type, callback) {\n    if (el.addEventListener) {\n      el.addEventListener(type, callback, false);\n    } else if (el.attachEvent) {\n      el.attachEvent(`on${type}`, callback);\n    }\n  },\n  removeEvent(el, type, callback) {\n    if (el.removeEventListener) {\n      el.removeEventListener(type, callback, false);\n    } else if (el.detachEvent) {\n      el.detachEvent(`on${type}`, callback);\n    }\n  },\n  parseXml(data) {\n    // already a xml\n    if (data.documentElement) {\n      return data;\n    }\n    let xml;\n    // Standard\n    if (window.DOMParser) {\n      xml = new DOMParser().parseFromString(data, 'text/xml');\n    } else { // IE\n      xml = new window.ActiveXObject('Microsoft.XMLDOM');\n      xml.async = false;\n      xml.loadXML(data);\n    }\n    if (!xml || !xml.documentElement || xml.getElementsByTagName('parsererror').length) {\n      throw new Error(`Invalid XML: ${data}`);\n    }\n    return xml;\n  },\n  mix(r, s, ov, wl, deep) {\n    let structured;\n    if (typeof ov === 'object') {\n      wl = ov.whitelist;\n      deep = ov.deep;\n      structured = ov.structured;\n      ov = ov.overwrite;\n    }\n\n    if (wl && (typeof wl !== 'function')) {\n      const originalWl = wl;\n      wl = (name, val) => {\n        return originalWl.indexOf(name) !== -1 ? val : undefined;\n      };\n    }\n\n    if (ov === undefined) {\n      ov = true;\n    }\n\n    if (structured === undefined) {\n      structured = true;\n    }\n\n    const cache = [];\n    let i = 0;\n    let c;\n    mixInternal(r, s, ov, wl, deep, cache, structured);\n    /* eslint no-cond-assign:0 */\n    while ((c = cache[i++])) {\n      delete c[MIX_CIRCULAR_DETECTION];\n    }\n    return r;\n  },\n  /**\n   * Creates a deep copy of a plain object or array. Others are returned untouched.\n   * @param input\n   * @member utils\n   * @param {Function} [filter] filter function\n   * @return {Object} the new cloned object\n   * refer: http://www.w3.org/TR/html5/common-dom-interfaces.html#safe-passing-of-structured-data\n   */\n  clone(input, filter) {\n    //  :)\n    // Let memory be an association list of pairs of objects,\n    // initially empty. This is used to handle duplicate references.\n    // In each pair of objects, one is called the source object\n    // and the other the destination object.\n    let structured;\n    if (typeof filter === 'object') {\n      structured = filter.structured;\n      filter = filter.filter;\n    }\n    if (structured === undefined) {\n      structured = true;\n    }\n    let memory;\n    if (structured) {\n      memory = {};\n    }\n    const ret = cloneInternal(input, filter, memory, structured);\n    if (structured) {\n      utils.each(memory, (v_) => {\n        // \n        const v = v_.input;\n        if (v[CLONE_MARKER]) {\n          try {\n            delete v[CLONE_MARKER];\n          } catch (e) {\n            v[CLONE_MARKER] = undefined;\n          }\n        }\n      });\n    }\n    memory = null;\n    return ret;\n  },\n  guid(pre) {\n    return (pre || EMPTY) + guid++;\n  },\n  makeArray(o) {\n    if (o === undefined || o === null) {\n      return [];\n    }\n    if (Array.isArray(o)) {\n      return o;\n    }\n    const lengthType = typeof o.length;\n    const oType = typeof o;\n    // The strings and functions also have 'length'\n    if (lengthType !== 'number' ||\n      // select element\n      // https://github.com/kissyteam/kissy/issues/537\n      typeof o.nodeName === 'string' ||\n      // window\n      (o !== null && o === o.window) ||\n      oType === 'string' ||\n      // https://github.com/ariya/phantomjs/issues/11478\n      (oType === 'function' && !('item' in o && lengthType === 'number'))) {\n      return [o];\n    }\n    const ret = [];\n    for (let i = 0, l = o.length; i < l; i++) {\n      ret[i] = o[i];\n    }\n    return ret;\n  },\n  /**\n   * test whether a string start with a specified substring\n   * @param {String} str the whole string\n   * @param {String} prefix a specified substring\n   * @return {Boolean} whether str start with prefix\n   * @member utils\n   */\n  startsWith(str, prefix) {\n    return str.lastIndexOf(prefix, 0) === 0;\n  },\n\n  /**\n   * test whether a string end with a specified substring\n   * @param {String} str the whole string\n   * @param {String} suffix a specified substring\n   * @return {Boolean} whether str end with suffix\n   * @member utils\n   */\n  endsWith(str, suffix) {\n    const ind = str.length - suffix.length;\n    return ind >= 0 && str.indexOf(suffix, ind) === ind;\n  },\n  /**\n   * get escaped string from html.\n   * only escape\n   *      & > < ` / \" '\n   * refer:\n   *\n   * [http://yiminghe.javaeye.com/blog/788929](http://yiminghe.javaeye.com/blog/788929)\n   *\n   * [http://wonko.com/post/html-escaping](http://wonko.com/post/html-escaping)\n   * @param str {string} text2html show\n   * @member utils\n   * @return {String} escaped html\n   */\n  escapeHtml(str) {\n    if (!str && str !== 0) {\n      return '';\n    }\n    str = String(str);\n    if (!possibleEscapeHtmlReg.test(str)) {\n      return str;\n    }\n    return str.replace(escapeHtmlReg, (m) => {\n      return reverseEntities[m];\n    });\n  },\n\n  /**\n   * get escaped regexp string for construct regexp.\n   * @param str\n   * @member utils\n   * @return {String} escaped regexp\n   */\n  escapeRegExp(str) {\n    return str.replace(escapeRegExp, '\\\\$&');\n  },\n\n  /**\n   * un-escape html to string.\n   * only unescape\n   *      &amp; &lt; &gt; &#x60; &#x2F; &quot; &#x27; &#\\d{1,5}\n   * @param str {string} html2text\n   * @member utils\n   * @return {String} un-escaped html\n   */\n  unEscapeHtml(str) {\n    return str.replace(unEscapeHtmlReg, (m, n) => {\n      return htmlEntities[m] || String.fromCharCode(+n);\n    });\n  },\n\n  extend(Child, Parent, members) {\n    function Noop() {\n    }\n\n    Noop.prototype = Parent.prototype;\n    Child.prototype = new Noop();\n    Child.prototype.constructor = Child;\n    assign(Child.prototype, members);\n  },\n  globalEval(data) {\n    if (data && RE_NOT_WHITESPACE.test(data)) {\n      // http://weblogs.java.net/blog/driscoll/archive/2009/09/08/eval-javascript-global-context\n      // http://msdn.microsoft.com/en-us/library/ie/ms536420(v=vs.85).aspx always return null\n      if (window.execScript) {\n        window.execScript(data);\n      } else {\n        ((d) => {\n          window.eval.call(window, d);\n        })(data);\n      }\n    }\n  },\n  noop() {\n  },\n  isEmptyObject(obj) {\n    return !obj || !Object.keys(obj).length;\n  },\n  inArray(needle, arr) {\n    return arr.indexOf(needle) !== -1;\n  },\n  formatQuery(o, sep, eq, serializeArray) {\n    sep = sep || '&';\n    eq = eq || '=';\n    if (serializeArray === undefined) {\n      serializeArray = true;\n    }\n    const buf = [];\n    let key;\n    let i;\n    let v;\n    let len;\n    let val;\n    for (key in o) {\n      if (o.hasOwnProperty(key)) {\n        val = o[key];\n        const originalKey = key;\n        key = encodeURIComponent(key);\n\n        // val is valid non-array value\n        if (isValidParamValue(val)) {\n          buf.push(key);\n          if (val !== undefined) {\n            buf.push(eq, encodeURIComponent(val + EMPTY));\n          }\n          buf.push(sep);\n        } else if (Array.isArray(val)) {\n          // val is not empty array\n          for (i = 0, len = val.length; i < len; ++i) {\n            v = val[i];\n            if (isValidParamValue(v)) {\n              buf.push(key, (serializeArray && (originalKey.slice(0 - 2) !== '[]') ?\n                encodeURIComponent('[]') : EMPTY));\n              if (v !== undefined) {\n                buf.push(eq, encodeURIComponent(v + EMPTY));\n              }\n              buf.push(sep);\n            }\n          }\n        }\n      }\n    }\n    buf.pop();\n    return buf.join(EMPTY);\n  },\n  each(obj, callback) {\n    if (Array.isArray(obj)) {\n      obj.forEach(callback);\n    } else {\n      Object.keys(obj).forEach((k) => {\n        callback(obj[k], k);\n      });\n    }\n  },\n};\n\nfunction numberify(s) {\n  let c = 0;\n  // convert '1.2.3.4' to 1.234\n  return parseFloat(s.replace(/\\./g, () => {\n    return (c++ === 0) ? '.' : '';\n  }));\n}\n\nlet m;\nlet v;\nconst ua = (window.navigator || {}).userAgent || '';\nif ((m = ua.match(/MSIE ([^;]*)|Trident.*; rv(?:\\s|:)?([0-9.]+)/)) &&\n  (v = (m[1] || m[2]))) {\n  utils.ie = numberify(v);\n  utils.ieMode = document.documentMode || utils.ie;\n}\n\nexport default utils;\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils.js","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/object-assign/index.js\n// module id = 6\n// module chunks = 3","/**\n * utilities for dealing with query strings.\n * conforms to nodejs api.\n * @author yiminghe@gmail.com\n */\nvar SEP = '&',\n    EMPTY = '',\n    undef,\n    urlEncode = encodeURIComponent,\n    toString = ({}).toString,\n    EQ = '=';\n\nfunction isValidParamValue(val) {\n    var t = typeof val;\n    // If the type of val is null, undef, number, string, boolean, return TRUE.\n    return val == null || (t !== 'object' && t !== 'function');\n}\n\nfunction isArray(o) {\n    return toString.apply(o) === '[object Array]';\n}\n\nfunction urlDecode(s) {\n    return decodeURIComponent(s.replace(/\\+/g, ' '));\n}\n\nmodule.exports = {\n    version: '@VERSION@',\n\n    _debug: '@DEBUG@',\n\n    /**\n     * Creates a serialized string of an array or object.\n     *\n     * for example:\n     *     @example\n     *     {foo: 1, bar: 2}    // -> 'foo=1&bar=2'\n     *     {foo: 1, bar: [2, 3]}    // -> 'foo=1&bar=2&bar=3'\n     *     {foo: '', bar: 2}    // -> 'foo=&bar=2'\n     *     {foo: undef, bar: 2}    // -> 'foo=undef&bar=2'\n     *     {foo: TRUE, bar: 2}    // -> 'foo=TRUE&bar=2'\n     *\n     * @param {Object} o json data\n     * @param {String} [sep='&'] separator between each pair of data\n     * @param {String} [eq='='] separator between key and value of data\n     * @param {Boolean} [serializeArray=true] whether add '[]' to array key of data\n     * @return {String}\n     * @member KISSY\n     */\n    stringify: function (o, sep, eq, serializeArray) {\n        sep = sep || SEP;\n        eq = eq || EQ;\n        if (serializeArray === undef) {\n            serializeArray = true;\n        }\n        var buf = [],\n            key, i, v, len, val;\n        for (key in o) {\n            val = o[key];\n            var originalKey = key;\n            key = urlEncode(key);\n\n            // val is valid non-array value\n            if (isValidParamValue(val)) {\n                buf.push(key);\n                if (val !== undef) {\n                    buf.push(eq, urlEncode(val + EMPTY));\n                }\n                buf.push(sep);\n            } else if (isArray(val)) {\n                // val is not empty array\n                for (i = 0, len = val.length; i < len; ++i) {\n                    v = val[i];\n                    if (isValidParamValue(v)) {\n                        buf.push(key, (serializeArray && (originalKey.slice(0 - 2) !== '[]') ? urlEncode('[]') : EMPTY));\n                        if (v !== undef) {\n                            buf.push(eq, urlEncode(v + EMPTY));\n                        }\n                        buf.push(sep);\n                    }\n                }\n            }\n            // ignore other cases, including empty array, Function, RegExp, Date etc.\n        }\n        buf.pop();\n        return buf.join(EMPTY);\n    },\n\n    /**\n     * Parses a URI-like query string and returns an object composed of parameter/value pairs.\n     *\n     * for example:\n     *      @example\n     *      'section=blog&id=45'        // -> {section: 'blog', id: '45'}\n     *      'section=blog&tag=js&tag=doc' // -> {section: 'blog', tag: ['js', 'doc']}\n     *      'tag=ruby%20on%20rails'        // -> {tag: 'ruby on rails'}\n     *      'id=45&raw'        // -> {id: '45', raw: ''}\n     * @param {String} str param string\n     * @param {String} [sep='&'] separator between each pair of data\n     * @param {String} [eq='='] separator between key and value of data\n     * @return {Object} json data\n     * @member KISSY\n     */\n    parse: function (str, sep, eq) {\n        sep = sep || SEP;\n        eq = eq || EQ;\n        var ret = {},\n            eqIndex, key, val,\n            pairs = str.split(sep),\n            i = 0, len = pairs.length;\n\n        for (; i < len; ++i) {\n            eqIndex = pairs[i].indexOf(eq);\n            if (eqIndex === -1) {\n                key = urlDecode(pairs[i]);\n                val = undef;\n            } else {\n                // remember to decode key!\n                key = urlDecode(pairs[i].substring(0, eqIndex));\n                val = pairs[i].substring(eqIndex + 1);\n                try {\n                    // http://stackoverflow.com/questions/9064536/javascript-decodeuricomponent-malformed-uri-exception\n                    val = urlDecode(val);\n                } catch (e) {\n                    console.error('decodeURIComponent error : ' + val);\n                    console.error(e);\n                }\n\n                if (key.slice(0 - 2) === '[]') {\n                    key = key.slice(0, 0 - 2);\n                }\n            }\n            if (key in ret) {\n                if (isArray(ret[key])) {\n                    ret[key].push(val);\n                } else {\n                    ret[key] = [ret[key], val];\n                }\n            } else {\n                ret[key] = val;\n            }\n        }\n        return ret;\n    }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/modulex-querystring/lib/querystring.js\n// module id = 7\n// module chunks = 3","/**\n * @ignore\n * url utilities\n * @author yiminghe@gmail.com\n */\nvar querystring = require('modulex-querystring');\nvar undef;\nvar Path = require('modulex-path');\nvar reDisallowedInProtocolOrAuth = /[#\\/\\?@]/g,\n    reDisallowedInPathName = /[#\\?]/g,\n    reDisallowedInHash = /#/g,\n    URI_SPLIT_REG = new RegExp(\n            '^' +\n            /*\n             Scheme names consist of a sequence of characters beginning with a\n             letter and followed by any combination of letters, digits, plus\n             ('+'), period ('.'), or hyphen ('-').\n             */\n            '([\\\\w\\\\d+.-]+:)?' + // protocol\n\n            '(?://' +\n            /*\n             The authority component is preceded by a double slash ('//') and is\n             terminated by the next slash ('/'), question mark ('?'), or number\n             sign ('#') character, or by the end of the URI.\n             */\n            '(?:([^/?#@]*)@)?' + // auth\n\n            '(' +\n            '[\\\\w\\\\d\\\\-\\\\u0100-\\\\uffff.+%]*' +\n            '|' +\n            // ipv6\n            '\\\\[[^\\\\]]+\\\\]' +\n            ')' + // hostname - restrict to letters,\n            // digits, dashes, dots, percent\n            // escapes, and unicode characters.\n            '(?::([0-9]+))?' + // port\n            ')?' +\n            /*\n             The path is terminated\n             by the first question mark ('?') or number sign ('#') character, or\n             by the end of the URI.\n             */\n            '([^?#]+)?' + // pathname. hierarchical part\n            /*\n             The query component is indicated by the first question\n             mark ('?') character and terminated by a number sign ('#') character\n             or by the end of the URI.\n             */\n            '(\\\\?[^#]*)?' + // search. non-hierarchical data\n            /*\n             The hash identifier component of a URI allows indirect\n             identification of a secondary resource by reference to a primary\n             resource and additional identifying information.\n\n             A\n             hash identifier component is indicated by the presence of a\n             number sign ('#') character and terminated by the end of the URI.\n             */\n            '(#.*)?' + // hash\n            '$'),\n\n    REG_INFO = {\n        protocol: 1,\n        auth: 2,\n        hostname: 3,\n        port: 4,\n        pathname: 5,\n        search: 6,\n        hash: 7\n    };\n\nfunction needDoubleSlash(str) {\n    if (str.slice(0 - 1) === ':') {\n        str = str.slice(0, -1);\n    }\n    return str === 'http' ||\n        str === 'https' ||\n        str === 'ftp' ||\n        str === 'gopher' ||\n        str === 'file';\n}\n\nfunction padding2(str) {\n    return str.length === 1 ? '0' + str : str;\n}\n\n// www.ta#bao.com // => www.ta.com/#bao.com\n// www.ta%23bao.com\n// Percent-Encoding\nfunction encodeSpecialChars(str, specialCharsReg) {\n    // encodeURI( ) is intended to encode complete URIs,\n    // the following ASCII punctuation characters,\n    // which have special meaning in URIs, are not escaped either:\n    // ; / ? : @ & = + $ , #\n    return encodeURI(str).replace(specialCharsReg, function (m) {\n        return '%' + padding2(m.charCodeAt(0).toString(16));\n    });\n}\n\nvar url = {\n    version: '@VERSION@',\n    \n    /**\n     * parse a url to a structured object\n     * @param {String} str url string\n     * @param {Boolean} [parseQueryString] whether parse query string to structured object\n     * @return {Object}\n     */\n    parse: function (str, parseQueryString) {\n        var m = str.match(URI_SPLIT_REG) || [],\n            ret = {};\n\n        // old ie 7:  return \"\" for unmatched regexp ...\n\n        for (var part in REG_INFO) {\n            ret[part] = m[REG_INFO[part]];\n        }\n\n        if (ret.protocol) {\n            ret.protocol = ret.protocol.toLowerCase();\n        }\n\n        if (ret.hostname) {\n            ret.hostname = ret.hostname.toLowerCase();\n        }\n\n        var protocol = ret.protocol;\n\n        if (protocol) {\n            ret.slashes = str.lastIndexOf(protocol + '//') !== -1;\n        }\n\n        // mailto: yiminghe@gmail.com\n        if (protocol && !needDoubleSlash(protocol.slice(0, -1))) {\n            if (!ret.slashes) {\n                str = str.slice(0, protocol.length) + '//' + str.slice(protocol.length);\n                ret = url.parse(str, parseQueryString);\n                ret.slashes = null;\n                return ret;\n            }\n        } else {\n            // http://www.g.cn\n            // pathname => /\n            if (ret.hostname && !ret.pathname) {\n                ret.pathname = '/';\n            }\n        }\n\n        ret.path = ret.pathname;\n        if (ret.search) {\n            ret.path += ret.search;\n        }\n        ret.host = ret.hostname;\n        if (ret.port) {\n            ret.host = ret.hostname + ':' + ret.port;\n        }\n        if (ret.search) {\n            ret.query = ret.search.substring(1);\n        }\n        if (parseQueryString && ret.query) {\n            ret.query = querystring.parse(ret.query);\n        }\n        ret.href = url.format(ret);\n        return ret;\n    },\n\n    /**\n     * Take a parsed URL object, and return a formatted URL string.\n     * @param {Object} url parsed from url.parse\n     * @param {Boolean} [serializeArray=true] whether add '[]' to array key of query data\n     */\n    format: function (url, serializeArray) {\n        var host = url.host;\n        if (host === undef && url.hostname) {\n            host = encodeURIComponent(url.hostname);\n            if (url.port) {\n                host += ':' + url.port;\n            }\n        }\n\n        var search = url.search;\n        var query = url.query;\n        if (search === undef && query !== undef) {\n            if (typeof query !== 'string') {\n                query = querystring.stringify(query, undef, undef, serializeArray);\n            }\n            if (query) {\n                search = '?' + query;\n            }\n        }\n\n        if (search && search.charAt(0) !== '?') {\n            search = '?' + search;\n        }\n\n        var hash = url.hash || '';\n        if (hash && hash.charAt(0) !== '#') {\n            hash = '#' + hash;\n        }\n\n        var pathname = url.pathname || '';\n\n        var out = [],\n            protocol, auth;\n\n        if ((protocol = url.protocol)) {\n            if (protocol.slice(0 - 1) !== ':') {\n                protocol += ':';\n            }\n\n            out.push(encodeSpecialChars(protocol, reDisallowedInProtocolOrAuth));\n        }\n\n        if (host !== undef) {\n            if (this.slashes || protocol && needDoubleSlash(protocol)) {\n                out.push('//');\n            }\n            if ((auth = url.auth)) {\n                out.push(encodeSpecialChars(auth, reDisallowedInProtocolOrAuth));\n                out.push('@');\n            }\n            out.push(host);\n        }\n\n        if (pathname) {\n            out.push(encodeSpecialChars(pathname, reDisallowedInPathName));\n        }\n\n        if (search) {\n            out.push(search);\n        }\n\n        if (hash) {\n            out.push('#' + encodeSpecialChars(hash.substring(1), reDisallowedInHash));\n        }\n\n        return out.join('');\n    },\n\n    resolve: function (from, to) {\n        var override = 0,\n            lastSlashIndex,\n            order = ['protocol', 'auth', 'host', 'pathname', 'search', 'hash'],\n            target = {};\n\n        from = url.parse(from);\n        to = url.parse(to);\n\n        for (var i = 0; i < order.length; i++) {\n            var o = order[i];\n\n            if (override) {\n                target[o] = to[o];\n                continue;\n            } else {\n                target[o] = from[o];\n            }\n\n            if (o === 'pathname') {\n                // relativeUri does not set for scheme/userInfo/hostname/port\n                var pathname = to.pathname;\n                if (pathname) {\n                    // force to override target 's query with relative\n                    override = 1;\n                    if (pathname.charAt(0) !== '/') {\n                        if (target.hostname && !target.pathname) {\n                            // RFC 3986, section 5.2.3, case 1\n                            pathname = '/' + pathname;\n                        } else if (target.pathname) {\n                            if (pathname.slice(0 - 2) === '/.' || pathname.slice(0 - 3) === '/..' ||\n                                pathname === '.' || pathname === '..') {\n                                pathname = pathname + '/';\n                            }\n                            // RFC 3986, section 5.2.3, case 2\n                            lastSlashIndex = target.pathname.lastIndexOf('/');\n                            if (lastSlashIndex !== -1) {\n                                pathname = target.pathname.slice(0, lastSlashIndex + 1) + pathname;\n                            }\n                        }\n                    }\n                    // remove .. / .  as part of the resolution process\n                    target.pathname = Path.normalize(pathname);\n                }\n            } else if (o === 'search') {\n                if (to.search) {\n                    target.search = to.search;\n                    override = 1;\n                }\n            } else if (to[o]) {\n                // protocol auth host can inherit\n                override = override || target[o] !== to[o];\n                target[o] = to[o];\n            }\n        }\n\n        return url.format(target);\n    }\n};\n\nurl.stringify = url.format;\n\nmodule.exports = url;\n/*\n Refer\n - application/x-www-form-urlencoded\n - http://www.ietf.org/rfc/rfc3986.txt\n - http://en.wikipedia.org/wiki/URI_scheme\n - http://unixpapa.com/js/querystring.html\n - http://code.stephenmorley.org/javascript/parsing-query-strings-for-get-data/\n - same origin: http://tools.ietf.org/html/rfc6454\n */\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/modulex-url/lib/url.js\n// module id = 8\n// module chunks = 3","/**\n * @ignore\n * Port Node Utils For KISSY.\n * Note: Only posix mode.\n * @author yiminghe@gmail.com\n */\n// [root, dir, basename, ext]\nvar splitPathRe = /^(\\/?)([\\s\\S]+\\/(?!$)|\\/)?((?:\\.{1,2}$|[\\s\\S]+?)?(\\.[^.\\/]*)?)$/;\n\nfunction splitPathToArray(str) {\n    var arr = str.split(/\\/+/);\n    if (!arr[arr.length - 1]) {\n        arr = arr.slice(0, -1);\n    }\n    if (!arr[0]) {\n        arr = arr.slice(1);\n    }\n    return arr;\n}\n\n// Remove .. and . in path array\nfunction normalizeArray(parts, allowAboveRoot) {\n    // level above root\n    var up = 0,\n        i = parts.length - 1,\n    // splice costs a lot in ie\n    // use new array instead\n        newParts = [],\n        last;\n\n    for (; i >= 0; i--) {\n        last = parts[i];\n        if (last !== '.') {\n            if (last === '..') {\n                up++;\n            } else if (up) {\n                up--;\n            } else {\n                newParts[newParts.length] = last;\n            }\n        }\n    }\n\n    // if allow above root, has to add ..\n    if (allowAboveRoot) {\n        for (; up--; up) {\n            newParts[newParts.length] = '..';\n        }\n    }\n\n    newParts = newParts.reverse();\n\n    return newParts;\n}\n\n/**\n * Path Utils For KISSY.\n * @class KISSY.Path\n * @singleton\n */\nvar Path = {\n    version: '@VERSION@',\n\n    _debug: '@DEBUG@',\n\n    /**\n     * resolve([from ...], to)\n     * @return {String} Resolved path.\n     */\n    resolve: function () {\n        var resolvedPath = '',\n            resolvedPathStr,\n            i,\n            args = (arguments),\n            path,\n            absolute = 0;\n\n        for (i = args.length - 1; i >= 0 && !absolute; i--) {\n            path = args[i];\n            if (typeof path !== 'string' || !path) {\n                continue;\n            }\n            resolvedPath = path + '/' + resolvedPath;\n            absolute = path.charAt(0) === '/';\n        }\n\n        resolvedPathStr = normalizeArray(splitPathToArray(resolvedPath), !absolute).join('/');\n\n        return ((absolute ? '/' : '') + resolvedPathStr) || '.';\n    },\n\n    /**\n     * normalize .. and . in path\n     * @param {String} path Path tobe normalized\n     *\n     *\n     *      'x/y/../z' => 'x/z'\n     *      'x/y/z/../' => 'x/y/'\n     *\n     * @return {String}\n     */\n    normalize: function (path) {\n        var absolute = path.charAt(0) === '/',\n            trailingSlash = path.slice(0 - 1) === '/';\n\n        path = normalizeArray(splitPathToArray(path), !absolute).join('/');\n\n        if (!path && !absolute) {\n            path = '.';\n        }\n\n        if (path && trailingSlash) {\n            path += '/';\n        }\n\n        return (absolute ? '/' : '') + path;\n    },\n\n    /**\n     * join([path ...]) and normalize\n     * @return {String}\n     */\n    join: function () {\n        var args = Array.prototype.slice.call(arguments);\n        return Path.normalize(args.join('/'));\n    },\n\n    /**\n     * Get string which is to relative to from\n     * @param {String} from\n     * @param {String} to\n     *\n     *\n     *      relative('x/','x/y/z') => 'y/z'\n     *      relative('x/t/z','x/') => '../..'\n     *\n     * @return {String}\n     */\n    relative: function (from, to) {\n        from = Path.normalize(from);\n        to = Path.normalize(to);\n\n        var fromParts = splitPathToArray(from),\n            path = [],\n            sameIndex,\n            sameIndex2,\n            toParts = splitPathToArray(to),\n            commonLength = Math.min(fromParts.length, toParts.length);\n\n        for (sameIndex = 0; sameIndex < commonLength; sameIndex++) {\n            if (fromParts[sameIndex] !== toParts[sameIndex]) {\n                break;\n            }\n        }\n\n        sameIndex2 = sameIndex;\n\n        while (sameIndex < fromParts.length) {\n            path.push('..');\n            sameIndex++;\n        }\n\n        path = path.concat(toParts.slice(sameIndex2));\n\n        return path.join('/');\n    },\n\n    /**\n     * Get base name of path\n     * @param {String} path\n     * @param {String} [ext] ext to be stripped from result returned.\n     * @return {String}\n     */\n    basename: function (path, ext) {\n        var result = path.match(splitPathRe) || [],\n            basename;\n        basename = result[3] || '';\n        if (ext && basename && basename.slice(ext.length * -1) === ext) {\n            basename = basename.slice(0, -1 * ext.length);\n        }\n        return basename;\n    },\n\n    /**\n     * Get dirname of path\n     * @param {String} path\n     * @return {String}\n     */\n    dirname: function (path) {\n        var result = path.match(splitPathRe) || [],\n            root = result[1] || '',\n            dir = result[2] || '';\n\n        if (!root && !dir) {\n            // No dirname\n            return '.';\n        }\n\n        if (dir) {\n            // It has a dirname, strip trailing slash\n            dir = dir.substring(0, dir.length - 1);\n        }\n\n        return root + dir;\n    },\n\n    /**\n     * Get extension name of file in path\n     * @param {String} path\n     * @return {String}\n     */\n    extname: function (path) {\n        return (path.match(splitPathRe) || [])[4] || '';\n    }\n};\n\nmodule.exports = Path;\n/*\n Refer\n - https://github.com/joyent/node/blob/master/lib/path.js\n */\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/modulex-path/lib/path.js\n// module id = 9\n// module chunks = 3","function runFn(fn, args, next, stopAtError, done) {\n  const ret = fn(stopAtError ? args[1] : args[0]);\n  if (ret && ret.then) {\n    ret.then((ok) => {\n      if (stopAtError === false) {\n        done(null, ok);\n      } else {\n        next([null, ok]);\n      }\n    }, (error) => {\n      if (stopAtError) {\n        done(error, null);\n      } else {\n        next(error, null);\n      }\n    });\n  } else {\n    next([null, ret]);\n  }\n}\n\nfunction chainPromise(fns, arg, done, stopAtError = true) {\n  fns = fns.filter(f => !!f);\n  if (!fns.length) {\n    const args = stopAtError ? [null, arg] : [arg];\n    return done(...args);\n  }\n\n  let index = -1;\n\n  function next(ret) {\n    index++;\n    if (index < fns.length) {\n      const args = stopAtError ? [null, arg] : [arg];\n      runFn(fns[index], index === 0 ? args : ret, next, stopAtError, done);\n    } else {\n      done(...ret);\n    }\n  }\n\n  next();\n}\n\nexport default chainPromise;\n\n\n\n// WEBPACK FOOTER //\n// ./src/chain-promise.js","import utils from './utils';\nimport assign from 'object-assign';\nimport IO from './base';\nimport XhrTransportBase from './xhr-transport-base';\nimport SubDomainTransport from './sub-domain-transport';\n\n// express: subdomain offset\nfunction isSubDomain(hostname) {\n  // phonegap does not have document.domain\n  return document.domain && utils.endsWith(hostname, document.domain);\n}\n\nfunction XhrTransport(io) {\n  const c = io.config;\n  const crossDomain = c.crossDomain;\n  const useSubDomainProxy = c.useSubDomainProxy;\n  this.io = io;\n  if (useSubDomainProxy && crossDomain &&\n    (!XhrTransportBase.supportCORS || useSubDomainProxy === 'force')) {\n    // \n    if (isSubDomain(c.uri.hostname)) {\n      // force to not use sub domain transport\n      if (useSubDomainProxy) {\n        return new SubDomainTransport(io);\n      }\n    }\n  }\n\n  this.nativeXhr = XhrTransportBase.nativeXhr(crossDomain);\n  return this;\n}\n\nassign(XhrTransport.prototype, XhrTransportBase.proto, {\n  send() {\n    this.sendInternal();\n  },\n});\n\nIO.setupTransport('*', XhrTransport);\n/*\n 2012-11-28 note ie port problem:\n - ie  xhr  localhost:8888  localhost:9999\n - ie iframe  document.domain  port\n - localhost:8888  iframe  localhost:9999\n\n CORS : http://www.nczonline.net/blog/2010/05/25/cross-domain-io-with-cross-origin-resource-sharing/\n */\n\n\n\n// WEBPACK FOOTER //\n// ./src/xhr-transport.js","/* eslint no-console:0 */\n\nimport utils from './utils';\nimport querystring from 'modulex-querystring';\nimport urlUtils from 'modulex-url';\nimport IO from './base';\nimport assign from 'object-assign';\nimport { OK_CODE, NO_CONTENT_CODE, NOT_FOUND_CODE, NO_CONTENT_CODE2 } from './constants';\nimport sendMixin from './send-mixin';\n\n// http://msdn.microsoft.com/en-us/library/cc288060(v=vs.85).aspx\nconst XDomainRequest_ = utils.ieMode > 7 && window.XDomainRequest;\nconst XhrTransportBase = {\n  proto: {},\n};\nconst lastModifiedCached = {};\nconst eTagCached = {};\n\n\nIO.__lastModifiedCached = lastModifiedCached;\nIO.__eTagCached = eTagCached;\n\nfunction createStandardXHR(_, refWin) {\n  try {\n    return new (refWin || window).XMLHttpRequest();\n  } catch (e) {\n    // empty\n  }\n  return undefined;\n}\n\nconst supportCORS = XhrTransportBase.supportCORS =\n  typeof window !== undefined && ('withCredentials' in (createStandardXHR() || {}));\n\nfunction createActiveXHR(_, refWin) {\n  try {\n    return new (refWin || window).ActiveXObject('Microsoft.XMLHTTP');\n  } catch (e) {\n    // empty\n  }\n  return undefined;\n}\n\nXhrTransportBase.nativeXhr = typeof window !== undefined && window.ActiveXObject ?\n  (crossDomain, refWin) => {\n    // consider ie10\n    if (!supportCORS && crossDomain && XDomainRequest_) {\n      return new XDomainRequest_();\n    }\n    // ie7 XMLHttpRequest \n    return !IO.isLocal && createStandardXHR(crossDomain, refWin) ||\n      createActiveXHR(crossDomain, refWin);\n  } : createStandardXHR;\n\n\nXhrTransportBase.XDomainRequest_ = XDomainRequest_;\n\nfunction isInstanceOfXDomainRequest(xhr) {\n  return XDomainRequest_ && (xhr instanceof XDomainRequest_);\n}\n\nfunction getIfModifiedKey(c) {\n  const ifModified = c.ifModified;\n  let ifModifiedKey;\n  if (ifModified) {\n    ifModifiedKey = c.uri;\n    if (c.cache === false) {\n      ifModifiedKey = utils.clone(ifModifiedKey);\n      // remove random timestamp\n      // random timestamp is forced to fetch code file from server\n      delete ifModifiedKey.query._ksTS;\n    }\n    ifModifiedKey = urlUtils.stringify(ifModifiedKey);\n  }\n  return ifModifiedKey;\n}\n\nassign(XhrTransportBase.proto, sendMixin, {\n  sendInternal() {\n    this.callBeforeSendInternal();\n    const io = this.io;\n    const c = io.config;\n    const nativeXhr = this.nativeXhr;\n    const files = c.files;\n    const method = files ? 'post' : c.method;\n    const async = c.async;\n    let username;\n    const mimeType = io.mimeType;\n    const requestHeaders = io.requestHeaders || {};\n    const url = io._getUrlForSend();\n    let xhrFields;\n    const ifModifiedKey = getIfModifiedKey(c);\n    let cacheValue;\n    let i;\n\n    if (ifModifiedKey) {\n      // if io want a conditional load\n      // (response status is 304 and responseText is null)\n      // u need to set if-modified-since manually!\n      // or else\n      // u will always get response status 200 and full responseText\n      // which is also conditional load but process transparently by browser\n      cacheValue = lastModifiedCached[ifModifiedKey];\n      if (cacheValue) {\n        requestHeaders['If-Modified-Since'] = cacheValue;\n      }\n      cacheValue = eTagCached[ifModifiedKey];\n      if (cacheValue) {\n        requestHeaders['If-None-Match'] = cacheValue;\n      }\n    }\n    username = c.username;\n    if (username) {\n      nativeXhr.open(method, url, async, username, c.password);\n    } else {\n      nativeXhr.open(method, url, async);\n    }\n\n    xhrFields = c.xhrFields || {};\n\n    if (c.withCredentials) {\n      xhrFields.withCredentials = c.withCredentials;\n    }\n\n    if ('withCredentials' in xhrFields) {\n      if (!supportCORS) {\n        delete xhrFields.withCredentials;\n      }\n    }\n\n    for (i in xhrFields) {\n      if (xhrFields.hasOwnProperty(i)) {\n        try {\n          nativeXhr[i] = xhrFields[i];\n        } catch (e) {\n          // empty\n        }\n      }\n    }\n    // Override mime type if supported\n    if (mimeType && nativeXhr.overrideMimeType) {\n      nativeXhr.overrideMimeType(mimeType);\n    }\n\n    const xRequestHeader = requestHeaders['X-Requested-With'];\n\n    if (xRequestHeader === false) {\n      delete requestHeaders['X-Requested-With'];\n    }\n\n    // ie<10 XDomainRequest does not support setRequestHeader\n    if (typeof nativeXhr.setRequestHeader !== 'undefined') {\n      for (i in requestHeaders) {\n        if (requestHeaders.hasOwnProperty(i)) {\n          nativeXhr.setRequestHeader(i, requestHeaders[i]);\n        }\n      }\n    }\n\n    let sendContent = c.hasContent && c.data || null;\n\n    // support html5 file upload api\n    if (files) {\n      const originalSentContent = sendContent;\n      let data = {};\n      if (originalSentContent) {\n        data = querystring.parse(originalSentContent);\n      }\n      assign(data, files);\n      sendContent = new FormData();\n      utils.each(data, (vs, k) => {\n        if (Array.isArray(vs)) {\n          utils.each(vs, (v) => {\n            sendContent.append(k + (c.traditional ? '' : '[]'), v);\n          });\n        } else {\n          sendContent.append(k, vs);\n        }\n      });\n    }\n\n    nativeXhr.send(sendContent);\n\n    if (!async || nativeXhr.readyState === 4) {\n      this._callback();\n    } else {\n      // XDomainRequest_ \n      if (isInstanceOfXDomainRequest(nativeXhr)) {\n        nativeXhr.onload = () => {\n          nativeXhr.readyState = 4;\n          nativeXhr.status = 200;\n          this._callback();\n        };\n        nativeXhr.onerror = () => {\n          nativeXhr.readyState = 4;\n          nativeXhr.status = 500;\n          this._callback();\n        };\n      } else {\n        nativeXhr.onreadystatechange = () => {\n          this._callback();\n        };\n      }\n    }\n  },\n\n  _callback(event, abort) {\n    // Firefox throws exceptions when accessing properties\n    // of an xhr when a network error occurred\n    // http://helpful.knobs-dials.com/index.php/Component_returned_failure_code:_0x80040111_(NS_ERROR_NOT_AVAILABLE)\n    const nativeXhr = this.nativeXhr;\n    const io = this.io;\n    let ifModifiedKey;\n    let lastModified;\n    let eTag;\n    let statusText;\n    let xml;\n    const c = io.config;\n    try {\n      // abort or complete\n      if (abort || nativeXhr.readyState === 4) {\n        // ie6 ActiveObject \n        if (isInstanceOfXDomainRequest(nativeXhr)) {\n          nativeXhr.onerror = utils.noop;\n          nativeXhr.onload = utils.noop;\n        } else {\n          // ie6 ActiveObject \n          nativeXhr.onreadystatechange = utils.noop;\n        }\n\n        if (abort) {\n          //  abort \n          if (nativeXhr.readyState !== 4) {\n            nativeXhr.abort();\n          }\n        } else {\n          ifModifiedKey = getIfModifiedKey(c);\n\n          let status = nativeXhr.status;\n\n          // XDomainRequest_ \n          if (!isInstanceOfXDomainRequest(nativeXhr)) {\n            io.responseHeadersString = nativeXhr.getAllResponseHeaders();\n          }\n\n          if (ifModifiedKey) {\n            lastModified = nativeXhr.getResponseHeader('Last-Modified');\n            eTag = nativeXhr.getResponseHeader('ETag');\n            // if u want to set if-modified-since manually\n            // u need to save last-modified after the first request\n            if (lastModified) {\n              lastModifiedCached[ifModifiedKey] = lastModified;\n            }\n            if (eTag) {\n              eTagCached[eTag] = eTag;\n            }\n          }\n\n          xml = nativeXhr.responseXML;\n\n          // Construct response list\n          if (xml && xml.documentElement) {\n            io.responseXML = xml;\n          }\n\n          let text = io.responseText = nativeXhr.responseText;\n\n          // same with old-ie iframe-upload\n          if (c.files && text) {\n            const bodyIndex = text.indexOf('<body>');\n            let lastBodyIndex;\n            if (bodyIndex !== -1) {\n              lastBodyIndex = text.lastIndexOf('</body>');\n              if (lastBodyIndex === -1) {\n                lastBodyIndex = text.length;\n              }\n              text = text.slice(bodyIndex + 6, lastBodyIndex);\n            }\n            // same with old-ie logic\n            io.responseText = utils.unEscapeHtml(text);\n          }\n\n          // Firefox throws an exception when accessing\n          // statusText for faulty cross-domain requests\n          try {\n            statusText = nativeXhr.statusText;\n          } catch (e) {\n            // We normalize with Webkit giving an empty statusText\n            statusText = '';\n          }\n\n          // Filter status for non standard behaviors\n          // If the request is local and we have data: assume a success\n          // (success with no data won't get notified, that's the best we\n          // can do given current implementations)\n          if (!status && IO.isLocal && !c.crossDomain) {\n            status = io.responseText ? OK_CODE : NOT_FOUND_CODE;\n            // IE - #1450: sometimes returns 1223 when it should be 204\n          } else if (status === NO_CONTENT_CODE2) {\n            status = NO_CONTENT_CODE;\n          }\n          io._ioReady(status, statusText);\n        }\n      }\n    } catch (e) {\n      console.error(e.stack || e);\n      setTimeout(() => {\n        throw e;\n      }, 0);\n      nativeXhr.onreadystatechange = utils.noop;\n      if (!abort) {\n        io._ioReady(-1, e.message || 'process error');\n      }\n    }\n  },\n});\n\nexport default XhrTransportBase;\n\n\n\n// WEBPACK FOOTER //\n// ./src/xhr-transport-base.js","export const OK_CODE = 200;\nexport const ERROR_CODE = 500;\nexport const MULTIPLE_CHOICES = 300;\nexport const NOT_MODIFIED = 304;\nexport const NO_CONTENT_CODE = 204;\nexport const NOT_FOUND_CODE = 404;\nexport const NO_CONTENT_CODE2 = 1223;\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants.js","export default {\n  callBeforeSendInternal() {\n    const io = this.io;\n    const c = io.config;\n    if (c.beforeSendInternal) {\n      c.beforeSendInternal.call(c.context, this, c);\n    }\n  },\n\n  //  io.abort  io.abort\n  abort() {\n    this._callback(0, 1);\n  },\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/send-mixin.js","/* eslint no-console:0 */\n\nimport utils from './utils';\nimport url from 'modulex-url';\nimport assign from 'object-assign';\nimport XhrTransportBase from './xhr-transport-base';\nimport IO from './base';\n\n// hostname:{iframe: , ready:}\nconst iframeMap = {};\n\nIO.ajaxSetup({\n  useSubDomainProxy: '',\n  subDomainProxyUrl: '/proxy.htm',\n});\n\nfunction onLoad() {\n  const c = this.io.config;\n  const uri = c.uri;\n  const hostname = uri.hostname;\n  const iframeDesc = iframeMap[hostname];\n  iframeDesc.ready = 1;\n  utils.removeEvent(iframeDesc.iframe, 'load', this._onLoad);\n  this.send();\n}\n\nfunction SubDomainTransport(io) {\n  const c = io.config;\n  this.io = io;\n  c.crossDomain = false;\n  this._onLoad = onLoad.bind(this);\n}\n\nassign(SubDomainTransport.prototype, XhrTransportBase.proto, {\n  constructor: SubDomainTransport,\n  // get nativeXhr from iframe document\n  // not from current document directly like XhrTransport\n  send() {\n    const c = this.io.config;\n    const uri = c.uri;\n    const hostname = uri.hostname;\n    let iframe;\n    let iframeUri;\n    let iframeDesc = iframeMap[hostname];\n    const proxy = c.subDomainProxyUrl;\n\n    if (iframeDesc && iframeDesc.ready) {\n      this.window = iframeDesc.iframe.contentWindow;\n      this.nativeXhr = XhrTransportBase.nativeXhr(0, iframeDesc.iframe.contentWindow);\n      if (this.nativeXhr) {\n        this.sendInternal();\n      } else {\n        console.error('io: document.domain not set correctly!');\n      }\n      return;\n    }\n\n    if (!iframeDesc) {\n      iframeDesc = iframeMap[hostname] = {};\n      iframe = iframeDesc.iframe = document.createElement('iframe');\n      assign(iframe.style, {\n        position: 'absolute',\n        left: '-9999px',\n        top: '-9999px',\n      });\n      document.documentElement.insertBefore(iframe, null);\n      iframeUri = {};\n      iframeUri.protocol = uri.protocol;\n      iframeUri.host = uri.host;\n      iframeUri.pathname = proxy;\n      iframe.src = url.stringify(iframeUri);\n    } else {\n      iframe = iframeDesc.iframe;\n    }\n    utils.addEvent(iframe, 'load', this._onLoad);\n  },\n});\n\nexport default SubDomainTransport;\n\n\n\n// WEBPACK FOOTER //\n// ./src/sub-domain-transport.js","import utils from './utils';\nimport assign from 'object-assign';\nimport IO from './base';\nimport { OK_CODE, ERROR_CODE } from './constants';\nimport sendMixin from './send-mixin';\n\nIO.ajaxSetup({\n  accepts: {\n    script: `text/javascript,\\\napplication/javascript,\\\napplication/ecmascript,\\\napplication/x-ecmascript`,\n  },\n  contents: {\n    script: /javascript|ecmascript/,\n  },\n  converters: {\n    text: {\n      //  xhr+eval \n      //  script node \n      //  eval\n      script(text) {\n        utils.globalEval(text);\n        return text;\n      },\n    },\n  },\n});\n\nconst jsOnLoadCallbacks = {};\n\nfunction getScript(uri, success, charset) {\n  const config = success;\n  let error;\n  let callbacks;\n  if (typeof config === 'object') {\n    success = config.success;\n    error = config.error;\n    charset = config.charset;\n  }\n  callbacks = jsOnLoadCallbacks[uri] = jsOnLoadCallbacks[uri] || [];\n  callbacks.push([success, error]);\n  if (callbacks.length > 1) {\n    return callbacks.node;\n  }\n  const node = document.createElement('script');\n  if (charset) {\n    node.charset = charset;\n  }\n\n  node.src = uri;\n  node.async = true;\n\n  callbacks.node = node;\n\n  function end(callbackIndex) {\n    utils.each(jsOnLoadCallbacks[uri], (callback) => {\n      const fn = callback[callbackIndex];\n      if (fn) {\n        fn.call(node);\n      }\n    });\n    delete jsOnLoadCallbacks[uri];\n  }\n\n  function onload() {\n    const readyState = node.readyState;\n    if (!readyState ||\n      readyState === 'loaded' ||\n      readyState === 'complete') {\n      node.onreadystatechange = node.onload = null;\n      end(0);\n    }\n  }\n\n  node.onload = onload;\n  node.onerror = () => {\n    node.onerror = null;\n    end(1);\n  };\n\n  // can use js in head\n  document.documentElement.insertBefore(node, document.documentElement.firstChild);\n  return node;\n}\n\nfunction ScriptTransport(io) {\n  const config = io.config;\n  //  xhr+eval , \n  if (!config.crossDomain) {\n    return new (IO.getTransport('*'))(io);\n  }\n  this.io = io;\n  return this;\n}\n\nassign(ScriptTransport.prototype, sendMixin, {\n  send() {\n    const self = this;\n    self.callBeforeSendInternal();\n    const io = self.io;\n    const c = io.config;\n    self.script = getScript(io._getUrlForSend(), {\n      charset: c.scriptCharset,\n      success() {\n        self._callback('success');\n      },\n      error() {\n        self._callback('error');\n      },\n    });\n  },\n\n  _callback(event, abort) {\n    const { script, io } = this;\n    // , abort\n    if (!script) {\n      return;\n    }\n    this.script = undefined;\n    if (abort) {\n      return;\n    }\n    // Callback if not abort\n    if (event !== 'error') {\n      io._ioReady(OK_CODE, 'success');\n    } else if (event === 'error') {\n      //  ie<9 \n      io._ioReady(ERROR_CODE, 'script error');\n    }\n  },\n});\n\nIO.setupTransport('script', ScriptTransport);\n\n\n\n// WEBPACK FOOTER //\n// ./src/script-transport.js","import utils from './utils';\nimport IO from './base';\nIO.ajaxSetup({\n  jsonpCallback: 'callback',\n  jsonpCallbackName() {\n    //  now() \n    return utils.guid('jsonp');\n  },\n});\nIO.addPreprocessor('start', (e) => {\n  const io = e.io;\n  const c = io.config;\n  const type = c.type;\n  if (type[0] === 'jsonp') {\n    // jsonp does not need contentType.\n    // https://github.com/kissyteam/kissy/issues/394\n    delete c.contentType;\n    let response;\n    const cJsonpCallbackName = c.jsonpCallbackName;\n    let converters;\n    const jsonpCallbackName = typeof cJsonpCallbackName === 'function' ?\n      cJsonpCallbackName() :\n      cJsonpCallbackName;\n    const previous = window[jsonpCallbackName];\n\n    c.uri.query[c.jsonpCallback] = jsonpCallbackName;\n\n    // build temporary JSONP function\n    window[jsonpCallbackName] = (...args) => {\n      //  jsonpCallback(undefined)  \n      // jsonp \n      let r = args;\n      if (args.length <= 1) {\n        r = args[0];\n      }\n      // , onload \n      response = [r];\n    };\n\n    // cleanup whether success or failure\n    io.always(() => {\n      window[jsonpCallbackName] = previous;\n      if (previous === undefined) {\n        try {\n          delete window[jsonpCallbackName];\n        } catch (ee) {\n          // empty\n        }\n      } else if (response) {\n        // after io success handler called\n        // then call original existed jsonpcallback\n        previous(response[0]);\n      }\n    });\n\n    converters = c.converters;\n    converters.script = converters.script || {};\n\n    // script -> jsonp ,jsonp need to see json not as script\n    // if ie onload a 404/500 file or all browsers onload an invalid script\n    // 404/invalid will be caught here\n    // because response is undefined( jsonp callback is never called)\n    // error throwed will be caught in conversion step\n    // and will notify user by error callback\n    converters.script.json = () => {\n      if (!response) {\n        // notify event on production mode\n        throw new Error(`not call jsonpCallback: ${jsonpCallbackName}`);\n      }\n      return response[0];\n    };\n\n    type.length = 2;\n    //  script transport  script \n    type[0] = 'script';\n    type[1] = 'json';\n  }\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/jsonp.js","import IO from './base';\nimport querystring from 'modulex-querystring';\nimport assign from 'object-assign';\nimport FormSerializer from './form-serializer';\n\nconst slice = Array.prototype.slice;\n\nIO.addPreprocessor('start', (e) => {\n  const { FormData } = window;\n  const io = e.io;\n  let d;\n  let type;\n  let formParam;\n  let data;\n  const c = io.config;\n  const form = c.form;\n  const useIframeUpload = c.useIframeUpload || !FormData;\n\n  // serialize form if needed\n  if (form) {\n    data = c.data;\n    let isUpload = false;\n    const files = {};\n    const inputs = form.getElementsByTagName('input');\n    for (let i = 0, l = inputs.length; i < l; i++) {\n      const input = inputs[i];\n      if (input.type.toLowerCase() === 'file') {\n        isUpload = true;\n        if (useIframeUpload) {\n          break;\n        }\n        const selected = slice.call(input.files, 0);\n        files[input.getAttribute('name')] = selected.length > 1 ? selected : (selected[0] || null);\n      }\n    }\n\n    if (isUpload && !useIframeUpload) {\n      c.files = c.files || {};\n      assign(c.files, files);\n      // browser set contentType automatically for FileData\n      delete c.contentType;\n    }\n    // \n    if (!isUpload || !useIframeUpload) {\n      // when get need encode\n      // when FormData exists, only collect non-file type input\n      formParam = FormSerializer.getFormData(form);\n      if (c.hasContent) {\n        formParam = querystring.stringify(formParam, undefined, undefined, !c.traditional);\n        if (data) {\n          c.data += `&${formParam}`;\n        } else {\n          c.data = formParam;\n        }\n      } else {\n        // get  url\n        assign(c.uri.query, formParam);\n      }\n    } else {\n      // for old-ie\n      type = c.type;\n      d = type[0];\n      if (d === '*') {\n        d = 'text';\n      }\n      type.length = 2;\n      type[0] = 'iframe';\n      type[1] = d;\n    }\n  }\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/form.js","import utils from './utils';\nimport querystring from 'modulex-querystring';\nconst rselectTextarea = /^(?:select|textarea)/i;\nconst rCRLF = /\\r?\\n/g;\n/* eslint max-len:0 */\nconst rinput = /^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i;\n\nfunction normalizeCRLF(v) {\n  return v.replace(rCRLF, '\\r\\n');\n}\n\n// do not pass form.elements to S.makeArray ie678 bug\nfunction elementsToArray(elements) {\n  const ret = [];\n  for (let i = 0; i < elements.length; i++) {\n    ret.push(elements[i]);\n  }\n  return ret;\n}\n\nconst FormSerializer = {\n  /**\n   * form serialization\n   * @method\n   * @param {HTMLElement[]|HTMLElement|Node} forms form elements\n   * @return {String} serialized string represent form elements\n   * @param {Boolean}[serializeArray=false]\n   * @member IO\n   * @static\n   */\n  serialize(forms, serializeArray) {\n    // , []\n    return querystring.stringify(FormSerializer.getFormData(forms), undefined, undefined,\n      serializeArray || false);\n  },\n\n  getFormData(forms) {\n    let elements = [];\n    const data = {};\n    utils.each(forms, (el) => {\n      // form \n      // \n      const subs = el.elements ? elementsToArray(el.elements) : [el];\n      elements.push.apply(elements, subs);\n    });\n    // \n    elements = elements.filter((el) => {\n      // \n      return el.name &&\n        // \n        !el.disabled &&\n        (\n          // radio,checkbox \n          el.checked ||\n          // select  textarea\n          rselectTextarea.test(el.nodeName) ||\n          // input \n          rinput.test(el.type)\n        );\n\n      // \n    });\n    elements.forEach((el) => {\n      // TODO, select multiple, welcome pr\n      let val = el.value;\n      let vs;\n\n      // <select></select> select nothing!\n      // #297\n      if (val === null) {\n        return;\n      }\n\n      // \n      if (Array.isArray(val)) {\n        val = val.map(normalizeCRLF);\n      } else {\n        val = normalizeCRLF(val);\n      }\n\n      vs = data[el.name];\n      if (vs === undefined) {\n        data[el.name] = val;\n        return;\n      }\n      if (!Array.isArray(vs)) {\n        // \n        vs = data[el.name] = [vs];\n      }\n      vs.push.apply(vs, utils.makeArray(val));\n    });\n    return data;\n  },\n};\n\nmodule.exports = FormSerializer;\n\n\n\n// WEBPACK FOOTER //\n// ./src/form-serializer.js","import utils from './utils';\nimport querystring from 'modulex-querystring';\nimport IO from './base';\nimport assign from 'object-assign';\nimport { OK_CODE, ERROR_CODE } from './constants';\nconst BREATH_INTERVAL = 30;\nconst iframeConverter = utils.clone(IO.getConfig().converters.text);\n\n// https://github.com/kissyteam/kissy/issues/304\n// returned data must be escaped by server for json type\n// as data\n// eg:\n// <body>\n// {\n//    \"&lt;a&gt;xx&lt;/a&gt;\"\n// }\n// </body>\n// text or html type is of same effect.\n// same as normal ajax or html5 FileData\niframeConverter.json = (str) => {\n  return JSON.parse(utils.unEscapeHtml(str));\n};\n\n// iframe  body.innerText\nIO.ajaxSetup({\n  converters: {\n    // iframe  text \n    iframe: iframeConverter,\n    text: {\n      // fake type, just mirror\n      iframe(text) {\n        return text;\n      },\n    },\n    xml: {\n      // fake type, just mirror\n      iframe(xml) {\n        return xml;\n      },\n    },\n  },\n});\n\n/**\n * Whether has been set a custom domain.\n * Note not perfect: localhost:8888, domain='localhost'\n * @param {Window} [win] Test window. Default current window.\n * @return {Boolean}\n */\nfunction isCustomDomain() {\n  const domain = document.domain;\n  const hostname = location.hostname;\n  return domain !== hostname &&\n    domain !== (`[${hostname}]`);\t// IPv6 IP support\n}\n\n/**\n * Get appropriate src for new empty iframe.\n * Consider custom domain.\n * @param {Window} [win] Window new iframe will be inserted into.\n * @return {String} Src for iframe.\n */\nfunction getEmptyIframeSrc(win) {\n  if (utils.ie && isCustomDomain()) {\n    return `javascript:void(function(){\n${\n      encodeURIComponent(\n        `document.open();\\\ndocument.domain=\"${win.document.domain}\";\\\ndocument.close();`\n      )\n      }\n        }())`;\n  }\n  return '';\n}\n\nfunction createIframe(xhr) {\n  const id = utils.guid('io-iframe');\n  // empty src, so no history\n  const src = getEmptyIframeSrc();\n  const iframe = xhr.iframe = document.createElement('iframe');\n  iframe.src = src;\n  iframe.name = iframe.id = id;\n  iframe.style.position = 'absolute';\n  iframe.style.left = '-9999px';\n  iframe.style.bottom = 0;\n  iframe.style.width = 0;\n  iframe.style.height = 0;\n  iframe.style.visibility = 'hidden';\n  document.documentElement.insertBefore(iframe, null);\n  return iframe;\n}\n\nfunction addDataToForm(query, form, serializeArray) {\n  const ret = [];\n  let isArray;\n  let i;\n  let e;\n  utils.each(query, (data, k) => {\n    isArray = Array.isArray(data);\n    if (!isArray) {\n      data = [data];\n    }\n    // \n    for (i = 0; i < data.length; i++) {\n      e = document.createElement('input');\n      e.type = 'hidden';\n      e.name = k + (isArray && serializeArray ? '[]' : '');\n      e.value = data[i];\n      form.appendChild(e);\n      ret.push(e);\n    }\n  });\n  return ret;\n}\n\nfunction removeFieldsFromData(fields) {\n  if (fields) {\n    fields.forEach((f) => {\n      f.parentNode.removeChild(f);\n    });\n  }\n}\n\nfunction setAttrs(form, attrs) {\n  for (const a in attrs) {\n    if (attrs.hasOwnProperty(a)) {\n      form.setAttribute(a, attrs[a]);\n    }\n  }\n}\n\nfunction callback(event) {\n  const form = this.form;\n  const io = this.io;\n  const eventType = event.type;\n  let iframeDoc;\n  const iframe = io.iframe;\n\n  //  ,  abort\n  if (!iframe) {\n    return;\n  }\n\n  // ie6  action \n  if (eventType === 'abort' && utils.ie === 6) {\n    setTimeout(() => {\n      setAttrs(form, this.attrs);\n    }, 0);\n  } else {\n    setAttrs(form, this.attrs);\n  }\n\n  removeFieldsFromData(this.fields);\n\n  utils.removeEvent(iframe, 'load', this._callback);\n  utils.removeEvent(iframe, 'error', this._callback);\n\n  setTimeout(() => {\n    // firefox will keep loading if not set timeout\n    iframe.parentNode.removeChild(iframe);\n  }, BREATH_INTERVAL);\n\n  // nullify to prevent memory leak?\n  io.iframe = null;\n\n  if (eventType === 'load') {\n    try {\n      iframeDoc = iframe.contentWindow.document;\n      // ie<9\n      if (iframeDoc && iframeDoc.body) {\n        // https://github.com/kissyteam/kissy/issues/304\n        io.responseText = iframeDoc.body.innerHTML;\n        // ie still can retrieve xml 's responseText\n        if (utils.startsWith(io.responseText, '<?xml')) {\n          io.responseText = undefined;\n        }\n      }\n      // ie<9\n      // http://help.dottoro.com/ljbcjfot.php\n      // http://msdn.microsoft.com/en-us/library/windows/desktop/ms766512(v=vs.85).aspx\n      /*\n       In Internet Explorer,\n       XML documents can also be embedded into\n       HTML documents with the xml HTML elements.\n       To get an XMLDocument object\n       that represents the embedded XML data island,\n       use the XMLDocument property of the xml element.\n       Note that the support for\n       the XMLDocument property has been removed in Internet Explorer 9.\n       */\n      if (iframeDoc && iframeDoc.XMLDocument) {\n        io.responseXML = iframeDoc.XMLDocument;\n      } else {\n        // ie9 firefox chrome\n        io.responseXML = iframeDoc;\n      }\n      if (iframeDoc) {\n        io._ioReady(OK_CODE, 'success');\n      } else {\n        // chrome does not throw exception:\n        // Unsafe JavaScript attempt to access frame with URL upload.jss\n        // from frame with URL test.html.\n        // Domains, protocols and ports must match.\n        // chrome will get iframeDoc to null\n        // so this error is parser error to normalize all browsers\n        io._ioReady(ERROR_CODE, 'parser error');\n      }\n    } catch (e) {\n      // #245 submit to a  cross domain page except chrome\n      io._ioReady(ERROR_CODE, 'parser error');\n    }\n  } else if (eventType === 'error') {\n    io._ioReady(ERROR_CODE, 'error');\n  }\n}\n\nfunction IframeTransport(io) {\n  this.io = io;\n  this._callback = callback.bind(this);\n}\n\nassign(IframeTransport.prototype, {\n  send() {\n    this.callBeforeSendInternal();\n    const io = this.io;\n    const c = io.config;\n    let fields;\n    let iframe;\n    let query;\n    const data = c.data;\n    const form = c.form;\n\n    this.attrs = {\n      target: form.getAttribute('target') || '',\n      action: form.getAttribute('action') || '',\n      // enctype  iframe  serialize\n      encoding: form.getAttribute('encoding'),\n      enctype: form.getAttribute('enctype'),\n      method: form.getAttribute('method'),\n    };\n    this.form = form;\n\n    iframe = createIframe(io);\n\n    // set target to iframe to avoid main page refresh\n    setAttrs(form, {\n      target: iframe.id,\n      action: io._getUrlForSend(),\n      method: 'post',\n      enctype: 'multipart/form-data',\n      encoding: 'multipart/form-data',\n    });\n\n    // unparam to kv map\n    if (data) {\n      query = querystring.parse(data);\n    }\n\n    if (query) {\n      fields = addDataToForm(query, form, !c.traditional);\n    }\n\n    this.fields = fields;\n\n    const go = () => {\n      utils.addEvent(iframe, 'load', this._callback);\n      utils.addEvent(iframe, 'error', this._callback);\n      form.submit();\n    };\n\n    // ie6 need a breath\n    if (utils.ie === 6) {\n      setTimeout(go, 0);\n    } else {\n      // can not setTimeout or else chrome will submit to top window\n      go();\n    }\n  },\n\n  abort() {\n    this._callback({\n      type: 'abort',\n    });\n  },\n});\n\nIO.setupTransport('iframe', IframeTransport);\n\n\n\n// WEBPACK FOOTER //\n// ./src/iframe-transport.js","/* eslint no-console:0 */\n\nimport assign from 'object-assign';\nimport IO from './base';\nimport url from 'modulex-url';\nimport chainPromise from './chain-promise';\nimport { OK_CODE, MULTIPLE_CHOICES, NOT_MODIFIED } from './constants';\n\n// get individual response header from response header str\nconst HEADER_REG = /^(.*?):[ \\t]*([^\\r\\n]*)\\r?$/mg;\nconst responseInterceptors = IO._responseInterceptors;\n\nfunction handleResponseData(io) {\n  // text xml \n  const text = io.responseText;\n  const xml = io.responseXML;\n  const c = io.config;\n  const converts = c.converters;\n  let type0;\n  let contentType;\n  let responseData;\n  const contents = c.contents;\n  const type = c.type;\n\n  //  script js\n  // jsonp  script  json\n  if (text || xml) {\n    contentType = io.mimeType || io.getResponseHeader('Content-Type');\n\n    // \n    while (type[0] === '*') {\n      type.shift();\n    }\n\n    if (!type.length) {\n      // \n      for (type0 in contents) {\n        if (contents.hasOwnProperty(type0) &&\n          contents[type0].test(contentType)) {\n          if (type[0] !== type0) {\n            type.unshift(type0);\n          }\n          break;\n        }\n      }\n    }\n\n    //  mime type0  text \n    type[0] = type[0] || 'text';\n\n    // \n    for (let dataTypeIndex = 0; dataTypeIndex < type.length; dataTypeIndex++) {\n      if (type[dataTypeIndex] === 'text' && text !== undefined) {\n        responseData = text;\n        break;\n      } else if (type[dataTypeIndex] === 'xml' && xml !== undefined) {\n        //  xml  xml \n        responseData = xml;\n        break;\n      }\n    }\n\n    if (!responseData) {\n      const rawData = { text, xml };\n      //  text xml  text/xml\n      ['text', 'xml'].forEach((prevType) => {\n        type0 = type[0];\n        const converter = converts[prevType] && converts[prevType][type0];\n        if (converter && rawData[prevType]) {\n          type.unshift(prevType);\n          responseData = prevType === 'text' ? text : xml;\n          return false;\n        }\n        return undefined;\n      });\n    }\n  }\n  let prevType = type[0];\n\n  // \n  for (let i = 1; i < type.length; i++) {\n    type0 = type[i];\n\n    const converter = converts[prevType] && converts[prevType][type0];\n\n    if (!converter) {\n      throw new Error(`no covert for ${prevType} => ${type0}`);\n    }\n\n    try {\n      responseData = converter(responseData);\n    } catch(e) {\n      throw new Error(`converter failed from data => ${responseData}`);\n    }\n\n    prevType = type0;\n  }\n\n  io.responseData = responseData;\n}\n\nassign(IO.prototype,\n  {\n    // Caches the header\n    setRequestHeader(name, value) {\n      this.requestHeaders[name] = value;\n      return this;\n    },\n\n    /**\n     * get all response headers as string after request is completed.\n     * @member IO\n     * @return {String}\n     */\n    getAllResponseHeaders() {\n      return this.state === 2 ? this.responseHeadersString : null;\n    },\n\n    /**\n     * get header value in response to specified header name\n     * @param {String} name header name\n     * @return {String} header value\n     * @member IO\n     */\n    getResponseHeader(name) {\n      let match;\n      let responseHeaders;\n      // ie8 will be lowercase for content-type\n      name = name.toLowerCase();\n      if (this.state === 2) {\n        responseHeaders = this.responseHeaders;\n        if (!responseHeaders) {\n          responseHeaders = this.responseHeaders = {};\n          match = HEADER_REG.exec(this.responseHeadersString);\n          while (match) {\n            responseHeaders[match[1].toLowerCase()] = match[2];\n            match = HEADER_REG.exec(this.responseHeadersString);\n          }\n        }\n        match = responseHeaders[name];\n      }\n      return match === undefined ? null : match;\n    },\n\n    // Overrides response content-type header\n    overrideMimeType(type) {\n      if (!this.state) {\n        this.mimeType = type;\n      }\n      return this;\n    },\n\n    /**\n     * cancel this request\n     * @member IO\n     * @param {String} [statusText=abort] error reason as current request object's statusText\n     * @chainable\n     */\n    abort(statusText) {\n      statusText = statusText || 'abort';\n      if (this.transport) {\n        this.transport.abort(statusText);\n      }\n      this._ioReady(0, statusText);\n      return this;\n    },\n\n    /**\n     * get native XMLHttpRequest\n     * @member IO\n     * @return {XMLHttpRequest}\n     */\n    getNativeXhr() {\n      const transport = this.transport;\n      if (transport) {\n        return transport.nativeXhr;\n      }\n      return null;\n    },\n\n    _ioReady(status, statusText) {\n      // \n      //  abort\n\n      // success\n      //  error\n      //  complete\n      if (this.state === 2) {\n        return;\n      }\n      this.state = 2;\n      this.readyState = 4;\n      let isSuccess;\n      if (status >= OK_CODE && status < MULTIPLE_CHOICES || status === NOT_MODIFIED) {\n        // note: not same with nativeStatusText, such as 'OK'/'Not Modified'\n        // \n        if (status === NOT_MODIFIED) {\n          statusText = 'not modified';\n          isSuccess = true;\n        } else {\n          try {\n            handleResponseData(this);\n            statusText = 'success';\n            isSuccess = true;\n          } catch (e) {\n            console.error(e.stack || e);\n            setTimeout(() => {\n              throw e;\n            }, 0);\n            statusText = e.message || 'parser error';\n          }\n        }\n      } else {\n        if (status < 0) {\n          status = 0;\n        }\n      }\n\n      this.status = status;\n      this.statusText = statusText;\n\n      const config = this.config;\n      const timeoutTimer = this.timeoutTimer;\n      if (timeoutTimer) {\n        clearTimeout(timeoutTimer);\n        this.timeoutTimer = 0;\n      }\n      const context = config.context;\n      const handler = isSuccess ? 'success' : 'error';\n      let responseData = this.responseData;\n\n      const argumentError = (_e) => {\n        let e = _e;\n        if (!(e instanceof Error)) {\n          e = new Error(e);\n        }\n        e.xhr = this.transport.nativeXhr;\n        e.io = this;\n        e.status = status;\n        return e;\n      };\n\n      let error = isSuccess ? null : argumentError(statusText);\n\n      const done = (_error, _responseData) => {\n        error = _error;\n        if (error) {\n          error = argumentError(error);\n        }\n        responseData = _responseData;\n        const payload = [responseData, statusText, this];\n        if (error) {\n          if (config.error) {\n            config.error.call(context, error);\n          }\n        } else if (config.success) {\n          config.success.apply(context, payload);\n        }\n\n        const eventObject = {\n          io: this,\n          payload,\n          error,\n        };\n        const h = config.complete;\n        if (h) {\n          h.apply(context, payload);\n        }\n        IO.fire(handler, eventObject);\n        IO.fire('complete', eventObject);\n        if (typeof Promise !== 'undefined') {\n          this.getPromise();\n          if (isSuccess) {\n            this.__resolve(responseData);\n          } else {\n            this.__reject(error);\n          }\n        }\n      };\n\n      if (error) {\n        chainPromise(responseInterceptors.map(interceptor => interceptor.error),\n          error, done, false);\n      } else {\n        chainPromise(responseInterceptors.map(interceptor => interceptor.success),\n          responseData, done);\n      }\n    },\n\n    _getUrlForSend() {\n      // for compatible, some server does not decode query\n      // uri will encode query\n      // x.html?t=1,2\n      // =>\n      // x.html?t=1%3c2\n      // so trim original query when process other query\n      // and append when send\n      const c = this.config;\n      const uri = c.uri;\n      let search = uri.search || '';\n      delete uri.search;\n      if (search && Object.keys(uri.query).length) {\n        search = `&${search.substring(1)}`;\n      }\n      return url.stringify(uri, !c.traditional) + search;\n    },\n  }\n);\n\n\n\n// WEBPACK FOOTER //\n// ./src/methods.js"],"sourceRoot":""}